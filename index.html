<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>30-Day Data Science Interview Prep</title>
    <meta name="description" content="Comprehensive interview preparation with AI coaching, structured curriculum, and daily progress tracking">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§ </text></svg>">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Vanta.js Dependencies (Three.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>

    <!-- Fonts (Geist) -->
    <style>
        @import url('https://assets.vercel.com/font/geist/font-sans.css');
        @import url('https://assets.vercel.com/font/geist/font-mono.css');

        /* --- CUSTOM STYLESHEET --- */

        :root {
            --font-sans: 'Geist', sans-serif;
            --font-mono: 'Geist Mono', monospace;
            
            --color-purple-900: #3b0764;
            --color-purple-800: #5b21b6;
            --color-purple-700: #7c3aed;
            --color-purple-600: #8b5cf6;
            --color-purple-500: #a855f7;
            --color-purple-400: #c084fc;
            --color-purple-200: #e9d5ff;
            --color-purple-100: #f3e8ff;

            --color-pink-900: #831843;
            --color-pink-800: #9d174d;
            --color-pink-700: #be185d;
            --color-pink-600: #db2777;
            --color-pink-500: #ec4899;
            --color-pink-400: #f472b6;
            --color-pink-200: #fbcfe8;
            --color-pink-100: #fce7f3;

            --color-blue-500: #3b82f6;
            --color-blue-700: #1d4ed8;

            --color-gray-100: #f3f4f6;
            --color-gray-200: #e5e7eb;
            --color-gray-300: #d1d5db;
            --color-gray-500: #6b7280;
            --color-gray-600: #4b5563;
            --color-gray-700: #374151;
            --color-gray-800: #1f2937;
            --color-gray-900: #11182c;

            --color-green-500: #22c55e;
            --color-green-600: #16a34a;

            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        /* --- Base Styles --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-sans);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
            position: relative;
            background-color: #f9fafb; /* Fallback */
            color: var(--color-gray-800);
            line-height: 1.6;
        }

        button {
            font-family: inherit;
            cursor: pointer;
            border: none;
            background: none;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
        }

        /* --- Layout & Utility Classes --- */
        .hidden {
            display: none !important;
        }

        .main-container {
            position: relative;
            z-index: 10;
            max-width: 80rem;
            margin: 0 auto;
            transition: all 0.5s;
            padding: 1rem;
        }

        .vanta-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
        }

        .max-w-7xl {
            max-width: 80rem;
            margin: 0 auto;
            position: relative;
            z-index: 10;
            width: 100%;
        }

        .relative { position: relative; }
        .z-10 { z-index: 10; }
        .text-center { text-align: center; }

        /* --- Custom Animations --- */
        @keyframes blossom-fall {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.4; }
            50% { opacity: 0.5; }
            100% { transform: translateY(100vh) translateX(100px) rotate(360deg); opacity: 0; }
        }
        .animate-blossom-fall { animation: blossom-fall linear forwards; }
        
        .animate-fade-in { animation: fadeIn 0.6s ease-in-out forwards; }
        .animate-scale-in { animation: scaleIn 0.4s ease-out forwards; }
        .animate-float { animation: float 8s ease-in-out infinite; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* --- Background Animations --- */
        .bg-animations-container {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            overflow: hidden;
            pointer-events: none;
        }
        .bg-blob {
            position: absolute;
            border-radius: 9999px;
            filter: blur(3rem);
        }
        .bg-blob-1 {
            top: 0; right: 0; width: 24rem; height: 24rem;
            background: linear-gradient(to bottom right, rgba(251, 207, 232, 0.06), rgba(224, 182, 255, 0.04));
            animation: float 8s ease-in-out infinite;
        }
        .bg-blob-2 {
            bottom: -5rem; left: 2.5rem; width: 20rem; height: 20rem;
            background: linear-gradient(to top right, rgba(224, 182, 255, 0.05), rgba(251, 207, 232, 0.04));
            animation: float 10s ease-in-out infinite 2s;
        }
        .bg-blob-3 {
            top: 50%; left: 25%; width: 18rem; height: 18rem;
            background: linear-gradient(to right, rgba(251, 207, 232, 0.03), rgba(224, 182, 255, 0.03));
            animation: float 12s ease-in-out infinite 4s;
        }
        .blossom-container-wrapper {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            overflow: hidden;
        }

        /* --- Loading & Modal --- */
        .loading-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            backdrop-filter: blur(4px);
        }
        .loading-overlay-content {
            text-align: center;
        }
        .loading-overlay-content p {
            color: white;
            font-weight: 600;
        }

        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 40;
            padding: 1rem;
        }
        .modal-content {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-2xl);
            max-width: 42rem;
            width: 100%;
            padding: 1.5rem;
            max-height: 80vh;
            overflow-y: auto;
            animation: scaleIn 0.4s ease-out forwards;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        #modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--color-gray-900);
        }
        .modal-close-btn {
            padding: 0.5rem;
            color: var(--color-gray-500);
            border-radius: 9999px;
        }
        .modal-close-btn:hover {
            background-color: var(--color-gray-100);
        }
        #modal-text {
            color: var(--color-gray-700);
            white-space: pre-wrap;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        /* --- Header Section --- */
        .header {
            position: relative;
            color: var(--color-purple-900);
            padding: 8rem 1rem;
            overflow: hidden;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .header-content {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeIn 0.6s ease-in-out forwards;
        }
        .header-title-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        .header-icon-bg {
            padding: 0.75rem;
            background-color: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(16px);
            border-radius: 9999px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: var(--shadow-2xl);
            transition: all 0.3s;
        }
        .header-icon-bg:hover {
            box-shadow: var(--shadow-xl);
        }
        .header-icon {
            color: var(--color-purple-700);
            filter: drop-shadow(0 4px 3px rgba(0,0,0,0.1));
        }
        .header-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--color-purple-900);
            text-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header-subtitle {
            font-size: 1.125rem;
            color: rgba(91, 33, 182, 0.95);
            max-width: 42rem;
            margin: 0 auto 2.5rem auto;
            line-height: 1.6;
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .header-stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .stat-card-header {
            background-color: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(16px);
            padding: 1.5rem;
            border-radius: 0.75rem;
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: var(--shadow-2xl);
            transition: all 0.3s;
        }
        .stat-card-header:hover {
            background-color: rgba(255, 255, 255, 0.5);
            box-shadow: var(--shadow-xl);
        }
        .stat-card-header-value {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--color-purple-900);
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .stat-card-header-label {
            color: rgba(91, 33, 182, 0.95);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .focus-mode-btn {
            padding: 0.75rem 2rem;
            background-image: linear-gradient(to right, var(--color-pink-500), var(--color-purple-600));
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            border-radius: 0.5rem;
            font-weight: 700;
            transition: all 0.3s;
            backdrop-filter: blur(4px);
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            box-shadow: var(--shadow-lg);
        }
        .focus-mode-btn:hover {
            background-image: linear-gradient(to right, var(--color-pink-600), var(--color-purple-700));
        }

        /* --- Focus Mode --- */
        .focus-mode-exit-container {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 50;
            display: flex;
            flex-direction: column;
        }
        .focus-mode-exit-btn {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 50;
            padding: 0.75rem;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 9999px;
            box-shadow: var(--shadow-lg);
            color: var(--color-purple-600);
            transition: all 0.3s;
            backdrop-filter: blur(4px);
        }
        .focus-mode-exit-btn:hover {
            color: var(--color-purple-800);
        }

        .main-container-focus-mode {
            max-width: 48rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- Week/Day Selector --- */
        .week-selector-container {
            position: relative;
            border-radius: 1rem;
            box-shadow: var(--shadow-2xl);
            transition: all 0.5s ease-in-out;
            padding: 1.5rem;
            margin-bottom: 2rem;
            overflow: hidden;
            border: 2px solid rgba(251, 207, 232, 0.4);
        }
        .week-selector-bg {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            pointer-events: none;
        }
        .week-selector-content {
            position: relative;
            z-index: 10;
        }
        .week-selector-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
        }
        .week-selector-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--color-pink-900);
            margin-bottom: 0.5rem;
        }
        .week-selector-subtitle {
            color: var(--color-gray-600);
            font-size: 1.125rem;
        }
        
        #week-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-bottom: 2rem;
        }
        
        .week-btn {
            position: relative;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-weight: 700;
            transition: all 0.3s;
            font-size: 1rem;
            transform: scale(1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80px;
            overflow: hidden;
            gap: 0.25rem;
        }
        .week-btn:hover {
            transform: scale(1.05);
        }
        .week-btn-selected {
            background-image: linear-gradient(to right, var(--color-pink-400), var(--color-purple-500));
            color: white;
            box-shadow: var(--shadow-lg);
        }
        .week-btn-default {
            background-color: rgba(255, 255, 255, 0.6);
            color: var(--color-gray-700);
        }
        .week-btn-default:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }
        .week-btn-active-ring {
            box-shadow: 0 0 0 2px white, 0 0 0 4px var(--color-blue-500);
        }

        .week-btn-text {
            position: relative;
            z-index: 10;
            font-size: 1.125rem;
        }
        
        .week-btn-percent {
            font-size: 0.8rem;
            z-index: 10;
            opacity: 0.9;
        }
        .week-btn-text-selected { color: white; }
        .week-btn-text-default { color: var(--color-purple-800); }

        .week-progress-track {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 6px;
            background-color: rgba(0,0,0,0.1);
            z-index: 5;
        }
        .week-progress-fill {
            height: 100%;
            background-color: var(--color-green-500);
            transition: width 0.5s ease-in-out;
        }

        .day-selector-card {
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 0.5rem;
            padding: 1.5rem;
            border: 1px solid rgba(236, 72, 153, 0.3);
        }
        #week-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-pink-900);
            margin-bottom: 1rem;
        }
        #day-selector {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        .day-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 700;
            transition: all 0.2s;
            font-size: 0.875rem;
            transform: scale(1);
        }
        .day-btn:hover {
            transform: scale(1.05);
        }
        .day-btn-selected {
            background-color: var(--color-purple-600);
            color: white;
            box-shadow: var(--shadow-lg);
        }
        .day-btn-default {
            background-color: rgba(255, 255, 255, 0.7);
            color: var(--color-purple-700);
        }
        .day-btn-active-ring {
            box-shadow: 0 0 0 2px var(--color-blue-500);
        }
        .day-btn-check {
            width: 1rem;
            height: 1rem;
            color: var(--color-green-500);
        }

        /* --- Main Content Card --- */
        .content-card-bg {
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            background-color: #fad3f7;
        }
        .content-card-bg-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.02), transparent, rgba(0,0,0,0.05));
            pointer-events: none;
        }
        .main-content-card {
            position: relative;
            z-index: 10;
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(4px);
            border-radius: 1rem;
            box-shadow: var(--shadow-2xl);
            border: 2px solid rgba(251, 207, 232, 0.4);
            overflow: hidden;
            margin: 1rem;
        }
        .main-content-header {
            padding: 1.5rem;
            border-bottom: 2px solid rgba(251, 207, 232, 0.35);
            background-color: rgba(255, 255, 255, 0.8);
        }
        .main-content-header-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }
        #day-topic-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--color-pink-900);
            margin-bottom: 0.75rem;
        }
        #day-quote {
            font-size: 1.125rem;
            color: var(--color-pink-800);
            font-weight: 600;
            font-style: italic;
        }
        
        .progress-bar-container {
            margin-bottom: 1.5rem;
        }
        .progress-bar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        #progress-text {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-pink-900);
        }
        #progress-percent {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--color-pink-800);
        }
        .progress-bar-bg {
            width: 100%;
            background-color: rgba(229, 231, 235, 0.7);
            border-radius: 9999px;
            height: 1rem;
            overflow: hidden;
        }
        #progress-bar-fill {
            background-image: linear-gradient(to right, var(--color-pink-400), var(--color-purple-400));
            height: 100%;
            border-radius: 9999px;
            transition: width 0.7s;
            box-shadow: var(--shadow-lg);
        }

        .tabs-container {
            display: flex;
            align-items: center;
            border-bottom: 2px solid var(--color-gray-300);
            margin: 2rem -1.5rem -2.5rem -1.5rem;
            padding: 0 1.5rem;
            overflow-x: auto;
        }
        .tab-button {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
            font-weight: 700;
            border-radius: 0.5rem 0.5rem 0 0;
            border-bottom: 4px solid transparent;
            transition: all 0.3s;
            font-size: 1rem;
            white-space: nowrap;
        }
        .tab-button-default {
            color: var(--color-gray-500);
            border-color: transparent;
        }
        .tab-button-default:hover {
            color: var(--color-gray-800);
        }
        .tab-button-active-topics {
            color: var(--color-pink-700);
            border-color: var(--color-pink-500);
        }
        .tab-button-active-assistant {
            color: var(--color-blue-700);
            border-color: var(--color-blue-500);
        }

        #tab-content {
            padding: 1.5rem;
        }

        /* --- Topics Tab --- */
        .topics-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        .topic-card {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 0.75rem;
            padding: 1.25rem;
        }
        .topic-card-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .topic-card-title {
            font-size: 1.125rem;
            font-weight: 700;
        }
        .topic-card-list {
            list-style: none;
            padding-left: 0;
        }
        .topic-card-list-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            color: var(--color-gray-700);
        }
        .topic-card-list-item-icon {
            color: var(--color-green-600);
            margin-top: 0.25rem;
            flex-shrink: 0;
        }
        .topic-card-list-item-numbered {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
            color: var(--color-gray-700);
        }
        .topic-card-list-item-number {
            color: var(--color-purple-600);
            font-weight: 700;
        }
        .topic-card-text {
            color: var(--color-gray-700);
        }

        /* --- Schedule Tab --- */
        .schedule-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-pink-900);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .schedule-slot-container {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .schedule-slot {
            border-radius: 0.75rem;
            border: 2px solid;
            overflow: hidden;
            transition: all 0.3s;
            backdrop-filter: blur(4px);
        }
        .schedule-slot-break {
            background-color: rgba(255, 247, 237, 0.7);
            border-color: rgba(251, 146, 60, 0.4);
        }
        .schedule-slot-learn {
            background-color: rgba(253, 242, 248, 0.7);
            border-color: rgba(251, 207, 232, 0.4);
        }
        .schedule-slot-btn {
            width: 100%;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .schedule-slot-btn-left {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-align: left;
        }
        .schedule-slot-icon-bg {
            padding: 0.5rem;
            border-radius: 0.5rem;
        }
        .schedule-slot-icon-bg-break {
            background-color: rgba(251, 146, 60, 0.4);
        }
        .schedule-slot-icon-bg-learn {
            background-color: rgba(251, 207, 232, 0.35);
        }
        .schedule-slot-icon-break { color: #c2410c; }
        .schedule-slot-icon-learn { color: var(--color-pink-600); }
        .schedule-slot-time {
            font-weight: 700;
            font-size: 1.125rem;
        }
        .schedule-slot-time-break { color: #7c2d12; }
        .schedule-slot-time-learn { color: var(--color-pink-800); }
        .schedule-slot-activity {
            font-size: 0.875rem;
        }
        .schedule-slot-activity-break { color: #9a3412; }
        .schedule-slot-activity-learn { color: var(--color-pink-700); }
        .schedule-slot-duration {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
        }
        .schedule-slot-duration-break {
            background-color: rgba(251, 146, 60, 0.4);
            color: #7c2d12;
        }
        .schedule-slot-duration-learn {
            background-color: rgba(251, 207, 232, 0.35);
            color: var(--color-pink-800);
        }

        .schedule-slot-concepts-container {
            padding: 0 1rem 1rem 1rem;
            border-top: 2px solid var(--color-pink-200);
            background-color: rgba(253, 242, 248, 0.5);
            animation: fadeIn 0.3s;
        }
        .schedule-slot-concepts-content {
            margin-top: 1rem;
        }
        .schedule-slot-concepts-title {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--color-pink-800);
            margin-bottom: 0.75rem;
        }
        .schedule-slot-concepts-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .concept-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .concept-item-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.25rem;
            transition: all 0.2s;
            flex-grow: 1;
        }
        .concept-item-label:hover {
            background-color: rgba(251, 207, 232, 0.25);
        }
        .concept-item-label input {
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 0.25rem;
            border-color: var(--color-pink-400);
        }
        .concept-item-text {
            font-size: 0.875rem;
            flex-grow: 1;
            color: var(--color-gray-700);
        }
        .concept-item-text-checked {
            color: var(--color-pink-700);
            text-decoration: line-through;
            font-weight: 500;
        }
        .concept-item-checked-icon {
            color: var(--color-green-600);
            flex-shrink: 0;
        }
        .concept-item-explain-btn {
            padding: 0.5rem;
            color: var(--color-purple-500);
            border-radius: 9999px;
            opacity: 0;
            transition: all 0.2s;
        }
        .concept-item:hover .concept-item-explain-btn {
            opacity: 1;
        }
        .concept-item-explain-btn:hover {
            background-color: rgba(233, 213, 255, 0.5);
        }

        /* --- AI Coach / DS Assistant Base --- */
        .coach-container {
            animation: fadeIn 0.3s;
            max-width: 48rem;
            margin: 0 auto;
        }
        .coach-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }
        .coach-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--color-gray-800);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .coach-topic {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--color-pink-800);
        }

        /* --- AI Coach --- */
        .coach-intro-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-gray-800);
            margin-bottom: 1.5rem;
        }
        .coach-intro-subtitle {
            color: var(--color-gray-600);
            margin-bottom: 1.5rem;
        }
        .coach-challenge-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .coach-challenge-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 0.75rem;
            border: 2px solid rgba(251, 207, 232, 0.3);
            transition: all 0.3s;
            box-shadow: var(--shadow-lg);
        }
        .coach-challenge-btn:hover {
            border-color: rgba(244, 114, 182, 0.5);
            background-color: white;
        }
        .coach-challenge-btn-left {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-align: left;
        }
        .coach-challenge-btn-icon { color: var(--color-pink-600); }
        .coach-challenge-btn-title {
            font-weight: 600;
            color: var(--color-gray-800);
        }
        .coach-challenge-btn-text {
            font-size: 0.875rem;
            color: var(--color-gray-600);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 24rem; /* md:max-w-lg */
        }
        .coach-challenge-difficulty {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
        }
        .difficulty-easy { color: #15803d; background-color: rgba(220, 252, 231, 0.5); }
        .difficulty-medium { color: #b45309; background-color: rgba(254, 249, 195, 0.5); }
        .difficulty-hard { color: #b91c1c; background-color: rgba(254, 226, 226, 0.5); }

        .coach-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--color-purple-700);
            font-weight: 600;
        }
        .coach-back-btn:hover { color: var(--color-purple-900); }
        
        .coach-challenge-box {
            background-image: linear-gradient(to right, rgba(252, 231, 253, 0.3), rgba(233, 213, 255, 0.25));
            border-radius: 0.75rem;
            padding: 1.75rem;
            border: 2px solid rgba(251, 207, 232, 0.35);
            margin: 1.5rem 0;
        }
        .coach-challenge-box-title {
            font-weight: 700;
            color: var(--color-pink-800);
            font-size: 1.125rem;
            margin-bottom: 0.75rem;
        }
        .coach-challenge-box-text {
            color: var(--color-gray-800);
            font-size: 1rem;
        }
        .coach-code-block {
            background-color: #f7f3fa; /* Light purple-white */
            border: 1px solid var(--color-purple-200);
            border-radius: 8px;
            padding: 1rem;
            font-family: var(--font-mono);
            color: #4b0082; /* Indigo/dark purple */
            font-size: 0.9rem;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .coach-answer-label {
            display: block;
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-gray-700);
            margin-bottom: 0.75rem;
        }
        .coach-answer-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(251, 207, 232, 0.35);
            border-radius: 0.75rem;
            resize: none;
            font-size: 1rem;
            font-family: var(--font-sans);
        }
        .coach-answer-textarea:focus {
            outline: none;
            border-color: var(--color-pink-500);
            box-shadow: 0 0 0 2px rgba(236, 72, 153, 0.2);
        }
        .coach-answer-textarea.font-mono {
            font-family: var(--font-mono);
        }

        .coach-submit-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 1.25rem 1.5rem;
            background-image: linear-gradient(to right, var(--color-purple-500), var(--color-pink-500));
            color: white;
            border-radius: 0.75rem;
            font-weight: 700;
            transition: all 0.3s;
            font-size: 1.125rem;
            box-shadow: var(--shadow-lg);
            margin-top: 1.5rem;
        }
        .coach-submit-btn:hover {
            box-shadow: var(--shadow-xl);
        }
        .coach-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }

        .coach-feedback-box {
            background-image: linear-gradient(to right, rgba(224, 231, 255, 0.3), rgba(233, 213, 255, 0.25));
            border-radius: 0.75rem;
            padding: 1.75rem;
            border: 2px solid rgba(165, 180, 252, 0.35);
            margin-top: 1.5rem;
        }
        .coach-feedback-title {
            font-weight: 700;
            color: var(--color-blue-700);
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }
        .coach-feedback-content {
            color: var(--color-gray-800);
            font-size: 1rem;
        }
        .coach-feedback-content h1, 
        .coach-feedback-content h2, 
        .coach-feedback-content h3 {
            font-weight: 700;
            margin-top: 1em;
            margin-bottom: 0.5em;
        }
        .coach-feedback-content h1 { font-size: 1.5em; }
        .coach-feedback-content h2 { font-size: 1.25em; }
        .coach-feedback-content h3 { font-size: 1.1em; }
        .coach-feedback-content ul, 
        .coach-feedback-content ol {
            margin-left: 1.5rem;
            margin-bottom: 1em;
        }
        .coach-feedback-content p {
            margin-bottom: 0.75em;
        }
        .coach-feedback-content code {
            font-family: var(--font-mono);
            background-color: var(--color-purple-100);
            padding: 0.1em 0.3em;
            border-radius: 4px;
        }
        .coach-feedback-content pre {
            background-color: #f7f3fa;
            border: 1px solid var(--color-purple-200);
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            margin-bottom: 1em;
        }
        .coach-feedback-content table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid var(--color-purple-200);
            margin: 1rem 0;
        }
        .coach-feedback-content th {
            border: 1px solid var(--color-purple-300);
            padding: 0.5rem;
            background-color: var(--color-purple-100);
            text-align: left;
            font-weight: 600;
        }
        .coach-feedback-content td {
            border: 1px solid var(--color-purple-200);
            padding: 0.5rem;
        }

        /* --- DS Assistant Tab --- */
        .assistant-clear-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--color-gray-500);
            font-weight: 600;
        }
        .assistant-clear-btn:hover { color: #ef4444; }
        
        .assistant-subtitle {
            color: var(--color-gray-600);
            margin-bottom: 1.5rem;
        }

        .chat-container {
            max-height: 500px;
            overflow-y: auto;
            background-color: #fcfaff; /* Very light purple */
            border: 1px solid var(--color-purple-200);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .chat-container p {
            margin: 0;
        }
        .chat-container .chat-empty {
            text-align: center;
            color: var(--color-gray-500);
            margin: auto;
        }
        .chat-bubble {
            padding: 0.75rem 1rem;
            border-radius: 18px;
            max-width: 80%;
            line-height: 1.6;
        }
        .chat-bubble-user {
            background-color: var(--color-purple-200);
            color: #3b0764;
            border-bottom-right-radius: 4px;
            align-self: flex-end;
            margin-left: auto;
        }
        .chat-bubble-model {
            background-color: #ffffff;
            color: #333;
            border: 1px solid var(--color-purple-100);
            border-bottom-left-radius: 4px;
            align-self: flex-start;
            margin-right: auto;
        }
        .chat-bubble-model h1, 
        .chat-bubble-model h2, 
        .chat-bubble-model h3 {
            font-weight: 700;
            margin-top: 1em;
            margin-bottom: 0.5em;
        }
        .chat-bubble-model h1 { font-size: 1.5em; }
        .chat-bubble-model h2 { font-size: 1.25em; }
        .chat-bubble-model h3 { font-size: 1.1em; }
        .chat-bubble-model ul, 
        .chat-bubble-model ol {
            margin-left: 1.5rem;
            margin-bottom: 1em;
        }
        .chat-bubble-model p {
            margin-bottom: 0.75em;
        }
        .chat-bubble-model code {
            font-family: var(--font-mono);
            background-color: var(--color-purple-100);
            padding: 0.1em 0.3em;
            border-radius: 4px;
        }
        .chat-bubble-model pre {
            background-color: #f7f3fa;
            border: 1px solid var(--color-purple-200);
            border-radius: 8px;
            padding: 0.75rem;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            margin-bottom: 1em;
        }
        .chat-bubble-model table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid var(--color-purple-200);
            margin: 1rem 0;
        }
        .chat-bubble-model th {
            border: 1px solid var(--color-purple-300);
            padding: 0.5rem;
            background-color: var(--color-purple-100);
            text-align: left;
            font-weight: 600;
        }
        .chat-bubble-model td {
            border: 1px solid var(--color-purple-200);
            padding: 0.5rem;
        }

        .assistant-input-area {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .assistant-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(191, 219, 254, 0.35);
            border-radius: 0.75rem;
            resize: none;
            font-size: 1rem;
            font-family: var(--font-sans);
        }
        .assistant-textarea:focus {
            outline: none;
            border-color: var(--color-blue-500);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        .assistant-submit-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 1.25rem 1.5rem;
            background-image: linear-gradient(to right, var(--color-blue-500), var(--color-purple-500));
            color: white;
            border-radius: 0.75rem;
            font-weight: 700;
            transition: all 0.3s;
            font-size: 1.125rem;
            box-shadow: var(--shadow-lg);
        }
        .assistant-submit-btn:hover {
            box-shadow: var(--shadow-xl);
        }
        .assistant-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* --- Footer --- */
        .footer {
            position: relative;
            padding: 5rem 0;
            border-top: 2px solid rgba(244, 114, 182, 0.3);
            overflow: hidden;
            margin-top: 4rem;
        }
        .footer-content {
            position: relative;
            z-index: 10;
            max-width: 80rem;
            margin: 0 auto;
            padding: 0 1rem;
        }
        .footer-stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 4rem;
        }
        .stat-card-footer {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            background-color: rgba(96, 165, 250, 0.2);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(147, 197, 253, 0.3);
            border-radius: 1rem;
            box-shadow: var(--shadow-2xl);
            transition: all 0.3s;
            transform: scale(1);
            color: white;
        }
        .stat-card-footer:hover {
            transform: scale(1.05);
        }
        .stat-card-footer-icon {
            color: #bfdbfe;
            margin-bottom: 1rem;
        }
        .stat-card-footer-value {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        .stat-card-footer-label {
            color: #dbeafe;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .footer-info-container {
            border-top: 1px solid rgba(147, 197, 253, 0.2);
            padding-top: 2.5rem;
            text-align: center;
        }
        .footer-info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .info-card-footer {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            background-color: rgba(96, 165, 250, 0.2);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(147, 197, 253, 0.3);
            border-radius: 1rem;
            box-shadow: var(--shadow-2xl);
            transition: all 0.3s;
            transform: scale(1);
            color: white;
        }
        .info-card-footer:hover {
            transform: scale(1.05);
        }
        .info-card-footer p {
            font-weight: 600;
        }
        .info-card-footer-lg { font-size: 1.125rem; }
        .info-card-footer-base { font-size: 1rem; }
        .info-card-footer-sm { font-size: 0.875rem; }

        .reset-btn-container {
            text-align: center;
            margin-bottom: 2rem;
        }
        .reset-progress-btn {
            background-color: rgba(239, 68, 68, 0.8);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 700;
            transition: all 0.3s;
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: var(--shadow-lg);
        }
        .reset-progress-btn:hover {
            background-color: rgba(220, 38, 38, 1);
            box-shadow: var(--shadow-xl);
        }

        /* --- Responsive Styles --- */
        @media (min-width: 768px) { /* md */
            .main-container { padding: 1.5rem; }
            .header { padding-left: 1.5rem; padding-right: 1.5rem; }
            .header-title { font-size: 3rem; }
            .header-subtitle { font-size: 1.25rem; }
            .header-stats-grid { grid-template-columns: repeat(4, 1fr); }
            
            .week-selector-container { padding: 2rem; }
            #week-selector { grid-template-columns: repeat(5, 1fr); } 
            .week-btn { font-size: 1.125rem; }
            
            .day-btn { font-size: 1rem; }
            
            .main-content-header { padding: 2.5rem; }
            .tabs-container { margin-left: -2.5rem; margin-right: -2.5rem; padding-left: 2.5rem; }
            #tab-content { padding: 2.5rem; }

            #day-topic-title { font-size: 3rem; }
            #day-quote { font-size: 1.25rem; }
            .tab-button { font-size: 1.125rem; }

            .topics-grid { grid-template-columns: repeat(2, 1fr); }

            .coach-challenge-btn-text { max-width: 32rem; }
            
            .footer-content { padding: 0 1.5rem; }
            .footer-stats-grid { grid-template-columns: repeat(2, 1fr); }
            .footer-info-grid { grid-template-columns: repeat(3, 1fr); }
        }

        @media (min-width: 1024px) { /* lg */
            .footer-stats-grid { grid-template-columns: repeat(4, 1fr); }
        }

    </style>
</head>
<body class="body">
    
    <div id="vanta-body-background" class="vanta-bg"></div>

    <!-- Background Animations -->
    <div class="bg-animations-container">
        <div class="bg-blob bg-blob-1"></div>
        <div class="bg-blob bg-blob-2"></div>
        <div class="bg-blob bg-blob-3"></div>
        
        <div class="blossom-container-wrapper">
            <!-- Blossom fall elements -->
            <template id="blossom-template">
                <div class="absolute opacity-40 animate-blossom-fall">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="3" fill="url(#blossom-gradient)" opacity="0.7" />
                        <circle cx="6" cy="8" r="2" fill="url(#blossom-gradient)" opacity="0.6" />
                        <circle cx="18" cy="8" r="2" fill="url(#blossom-gradient)" opacity="0.6" />
                        <circle cx="5" cy="16" r="2" fill="url(#blossom-gradient)" opacity="0.5" />
                        <circle cx="19" cy="16" r="2" fill="url(#blossom-gradient)" opacity="0.5" />
                        <defs>
                            <radialGradient id="blossom-gradient">
                                <stop offset="0%" stopColor="#d084d0" />
                                <stop offset="100%" stopColor="#c084a0" />
                            </radialGradient>
                        </defs>
                    </svg>
                </div>
            </template>
            <div id="blossom-container"></div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-overlay-content">
            <i data-lucide="loader-2" class="text-white animate-spin mx-auto mb-4" style="width: 48px; height: 48px; color: white; margin-bottom: 1rem; animation: spin 1s linear infinite;"></i>
            <p>AI Coach is thinking...</p>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal-overlay" class="modal-overlay hidden" onclick="closeModal()">
        <div id="modal-content" class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3 id="modal-title">Modal Title</h3>
                <button onclick="closeModal()" class="modal-close-btn">
                    <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                </button>
            </div>
            <div id="modal-text">Modal text...</div>
        </div>
    </div>

    <!-- Header Section (Not Focus Mode) -->
    <div id="header-section">
        <!-- Vanta.js CLOUDS background -->
        <div id="vanta-header" class="header">
            <div class="max-w-7xl">
                <div class="header-content">
                    <div class="header-title-container">
                        <div class="header-icon-bg">
                            <i data-lucide="brain" class="header-icon" style="width: 40px; height: 40px;"></i>
                        </div>
                        <h1 class="header-title">
                            30-Day DS Interview Mastery
                        </h1>
                    </div>
                    <p class="header-subtitle">
                        Master data science with intensive daily learning, AI coaching, and real-time progress tracking. Starting Today!
                    </p>
                    
                    <div class="header-stats-grid">
                        <div class="stat-card-header">
                            <div id="stats-days-started" class="stat-card-header-value">0</div>
                            <div class="stat-card-header-label">Days Started</div>
                        </div>
                        <div class="stat-card-header">
                            <div id="stats-concepts-mastered" class="stat-card-header-value">0</div>
                            <div class="stat-card-header-label">Concepts Mastered</div>
                        </div>
                        <div class="stat-card-header">
                            <div class="stat-card-header-value">8h</div>
                            <div class="stat-card-header-label">Daily Commitment</div>
                        </div>
                        <div class="stat-card-header">
                            <div class="stat-card-header-value">30</div>
                            <div class="stat-card-header-label">Total Days</div>
                        </div>
                    </div>

                    <button onclick="setFocusMode(true)" class="focus-mode-btn">
                        Enter Focus Mode
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Focus Mode Exit Button -->
    <div id="focus-mode-exit" class="focus-mode-exit-container hidden">
        <button onclick="setFocusMode(false)" class="focus-mode-exit-btn">
            <i data-lucide="x" style="width: 24px; height: 24px;"></i>
        </button>
    </div>

    <!-- Main Content Wrapper -->
    <div id="main-content-wrapper" class="main-container">
        
        <!-- Week/Day Selector -->
        <div id="vanta-weeks" class="week-selector-container">
            <div class="week-selector-bg"></div>
            <div class="week-selector-content">
                <div class="week-selector-header">
                    <div>
                        <h2 class="week-selector-title">
                            Select Your Learning Path
                        </h2>
                        <p class="week-selector-subtitle">Expand sessions and check off concepts as you master them</p>
                    </div>
                </div>
                
                <div id="week-selector">
                    <!-- Week buttons will be rendered here -->
                </div>

                <div class="day-selector-card">
                    <h3 id="week-title">
                        Week 1: ...
                    </h3>
                    <div id="day-selector">
                        <!-- Day buttons will be rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="vanta-middle" class="content-card-bg">
            <div class="content-card-bg-overlay"></div>
            
            <!-- Main Content Card -->
            <div id="main-content-card" class="main-content-card">
                <div class="main-content-header">
                    <div class="main-content-header-top">
                        <div>
                            <h2 id="day-topic-title">
                                Day 1: Descriptive Statistics
                            </h2>
                            <p id="day-quote">"..."</p>
                        </div>
                        <div id="day-icon-container"></div>
                    </div>
                    
                    <div class="progress-bar-container">
                        <div class="progress-bar-header">
                            <span id="progress-text">
                                Progress: 0 / 0 Concepts Mastered
                            </span>
                            <span id="progress-percent">0%</span>
                        </div>
                        <div class="progress-bar-bg">
                            <div id="progress-bar-fill" style="width: 0%">
                            </div>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="tabs-container">
                        <button id="tab-btn-topics" onclick="setActiveTab('topics')" class="tab-button tab-button-default">
                            <i data-lucide="book-open" style="width: 22px; height: 22px;"></i>
                            Topics
                        </button>
                        <button id="tab-btn-schedule" onclick="setActiveTab('schedule')" class="tab-button tab-button-default">
                            <i data-lucide="clock" style="width: 22px; height: 22px;"></i>
                            Schedule
                        </button>
                        <button id="tab-btn-coach" onclick="setActiveTab('coach')" class="tab-button tab-button-default">
                            <i data-lucide="sparkles" class="text-purple-500" style="width: 22px; height: 22px;"></i>
                            AI Coach
                        </button>
                        <button id="tab-btn-assistant" onclick="setActiveTab('assistant')" class="tab-button tab-button-default">
                            <i data-lucide="message-circle" class="text-blue-500" style="width: 22px; height: 22px;"></i>
                            DS Assistant
                        </button>
                    </div>
                </div>

                <!-- Tab Content Area -->
                <div id="tab-content">
                    <!-- Content will be rendered here by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="vanta-footer" class="footer">
        <div class="footer-content">
            
            <div class="reset-btn-container">
                <button onclick="resetChallenge()" class="reset-progress-btn">
                    <i data-lucide="rotate-ccw" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 8px;"></i>
                    Reset All Progress (Start from Today)
                </button>
            </div>

            <!-- Stat cards -->
            <div class="footer-stats-grid">
                <div class="stat-card-footer">
                    <i data-lucide="trending-up" class="stat-card-footer-icon" style="width: 32px; height: 32px;"></i>
                    <p id="footer-stats-days" class="stat-card-footer-value">0</p>
                    <p class="stat-card-footer-label">Days Started</p>
                </div>

                <div class="stat-card-footer">
                    <i data-lucide="award" class="stat-card-footer-icon" style="width: 32px; height: 32px;"></i>
                    <p id="footer-stats-concepts" class="stat-card-footer-value">0</p>
                    <p class="stat-card-footer-label">Concepts Mastered</p>
                </div>

                <div class="stat-card-footer">
                    <i data-lucide="flame" class="stat-card-footer-icon" style="width: 32px; height: 32px;"></i>
                    <p class="stat-card-footer-value">âˆž</p>
                    <p class="stat-card-footer-label">AI Support</p>
                </div>

                <div class="stat-card-footer">
                    <i data-lucide="calendar" class="stat-card-footer-icon" style="width: 32px; height: 32px;"></i>
                    <p class="stat-card-footer-value">30</p>
                    <p class="stat-card-footer-label">Total Days</p>
                </div>
            </div>

            <!-- Info cards -->
            <div class="footer-info-container">
                <div class="footer-info-grid">
                    <div class="info-card-footer">
                        <p class="info-card-footer-lg">Your Personal Data Science Interview Prep Companion</p>
                    </div>
                    <div class="info-card-footer">
                        <p class="info-card-footer-base">Powered by Google Gemini AI â€¢ Your personal DS interview coach</p>
                    </div>
                    <div class="info-card-footer">
                        <p class="info-card-footer-sm">Â© 2025 DS Interview Prep | Keep learning, keep growing</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <!-- Main Application Logic -->
    <script type="module">
        // --- DATA ---
        // Standard Template for typical days (Days 1-6, 8-13, etc.)
        const hourlyScheduleTemplate = [
            { time: '08:00 - 09:00 AM', activity: 'Session 1', type: 'learn', duration: 60, icon: 'book-open', concepts: [] },
            { time: '09:00 - 10:00 AM', activity: 'Session 2', type: 'learn', duration: 60, icon: 'brain', concepts: [] },
            { time: '10:00 - 10:15 AM', activity: 'â˜• Break', type: 'break', duration: 15, icon: 'coffee', concepts: [] },
            { time: '10:15 - 11:15 AM', activity: 'Session 3', type: 'learn', duration: 60, icon: 'code', concepts: [] },
            { time: '11:15 - 12:15 PM', activity: 'Session 4', type: 'learn', duration: 60, icon: 'terminal', concepts: [] },
            { time: '12:15 - 01:00 PM', activity: 'ðŸ½ï¸ Lunch Break', type: 'break', duration: 45, icon: 'coffee', concepts: [] },
            { time: '01:00 - 02:00 PM', activity: 'Session 5', type: 'practice', duration: 60, icon: 'keyboard', concepts: [] },
            { time: '02:00 - 03:00 PM', activity: 'Session 6', type: 'practice', duration: 60, icon: 'cpu', concepts: [] },
            { time: '03:00 - 03:15 PM', activity: 'â˜• Break', type: 'break', duration: 15, icon: 'coffee', concepts: [] },
            { time: '03:15 - 04:15 PM', activity: 'Session 7', type: 'practice', duration: 60, icon: 'target', concepts: [] },
            { time: '04:15 - 05:00 PM', activity: 'ðŸ“ Revision Session', type: 'review', duration: 45, icon: 'sparkles', concepts: [] }
        ];

        const motivationalQuotes = [
            "The journey of a thousand miles begins with a single step. Start strong!", "Believe you can and you're halfway there. Keep the momentum!", "Data is the new gold. Extract its value with every concept you master.", "It's not whether you get knocked down, it's whether you get up. Push through!", "The harder I work, the luckier I get. Keep practicing.", "Success is the sum of small efforts, repeated day in and day out.", "Rest and reflect. A well-rested mind is a sharp mind.", "Data cleaning is 80% of the work. Master it!", "Transformation is key. Turn raw data into insight.", "Great features are the foundation of great models. Build wisely!", "Simplicity is the ultimate sophistication. Find clarity in complexity.", "Balance creates harmony. Find it in your learning.", "A good pipeline is a work of art. Build wisely.", "Review. Reinforce. Relax. You've earned it.", "Every master was once a beginner. Embrace it.", "Precision and recall â€“ the delicate dance of learning.", "A single tree is weak, but a forest is strong.", "Boost your skills like you boost your models.", "Find the optimal balance in all things.", "Don't be lazy. Be an active, engaged learner!", "You've learned so much. Consolidate it.", "You can't improve what you don't measure.", "Tune your study habits for optimal performance.", "Understanding the 'why' matters more than knowing the 'what'.", "The only constant is change. Learn to adapt.", "Your dedication is your superpower.", "A model in a notebook is a thought; in production, it's a solution.", "Mega review day! Build your mental library.", "Normalize your habits for success.", "Join your knowledge together. Synergy matters."
        ];

        // --- CONDENSED DATA (30 DAYS) ---
        const originalData = {
            1: {
                title: "Statistics & Python Basics",
                days: [
                    {
                        day: 1, topic: "Descriptive Stats & Python Setup",
                        learn: ["Mean, Median, Mode mechanics & skewness impact", "Variance, SD, Bessel's correction", "IQR & Outlier math (1.5*IQR)", "Python: Lists vs Tuples vs Sets memory/speed", "Dict comprehensions & hashing"],
                        python: ["Implement mean/median/mode without libraries", "Variance calculation with and without Bessel's", "List vs Dict comprehension performance test"],
                        practice: "Coding problems on loops, hashmaps & basic stats",
                        review: "Anki flashcards: Stat formulas & Python data structures",
                        dailySchedule: [
                            "Calculate Mean, Median, Mode from scratch (no libraries)",
                            "Understand Skewness: Mean vs Median relationship",
                            "Derive Variance & Standard Deviation formula",
                            "Explain Bessel's Correction (n-1 vs n)",
                            "Calculate Range, IQR, and identify outliers (1.5*IQR)",
                            "Python Lists: Slicing, appending, memory model",
                            "Tuples vs Sets: Immutability & Hashing performance",
                            "Dictionary comprehensions for data mapping",
                            "Control flow: Enumerate, Zip, and List Comprehensions",
                            "Implement variance/SD in pure Python",
                            "Hands-on: Analyze a list of numbers for all stat metrics",
                            "Review: Summarize today's formulas & key Python syntax"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Easy', content: "Diff between mean, median, mode?" },
                            { type: 'code', difficulty: 'Medium', content: "Write a function for variance without numpy." },
                            { type: 'question', difficulty: 'Easy', content: "What does 'skewness' tell you about a distribution?" },
                            { type: 'code', difficulty: 'Medium', content: "Calculate standard deviation from scratch given a list of numbers." },
                            { type: 'question', difficulty: 'Hard', content: "Explain the intuition behind Bessel's Correction." }
                        ]
                    },
                    {
                        day: 2, topic: "Probability Basics & Functions",
                        learn: ["Probability Axioms & Rules", "Total Probability Theorem", "Independence vs Mutually Exclusive", "Bayes' Theorem Derivation", "Python: Lambda, Map, Filter, Generators"],
                        python: ["Implement Bayes' theorem function", "Simulate coin toss for Law of Large Numbers", "Generator expressions vs List comprehensions"],
                        practice: "Solve probability word problems with Python simulation",
                        review: "Spaced Repetition (Day 1+2)",
                        dailySchedule: [
                            "Define Sample Space, Events, and Probability Axioms",
                            "Understand Union, Intersection, and Complements",
                            "Differentiate Independent vs Mutually Exclusive events",
                            "Conditional Probability formula & intuition",
                            "Derive Bayes' Theorem from Conditional Probability",
                            "Python Functions: Args, Kwargs, Default parameters",
                            "Functional Programming: Lambda, Map, Filter, Reduce",
                            "File I/O: Context Managers (with open) best practices",
                            "Solve: Monty Hall problem simulation in Python",
                            "Code: Function to calculate posterior probability",
                            "Practice: 5 Probability word problems (Bayes focus)",
                            "Review: Active recall of Probability rules & Python functions"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Explain Bayes' Theorem in simple terms." },
                            { type: 'code', difficulty: 'Medium', content: "Use lambda with filter to clean a list." },
                            { type: 'question', difficulty: 'Easy', content: "Define mutually exclusive events." },
                            { type: 'question', difficulty: 'Medium', content: "What is the difference between Probability and Likelihood?" },
                            { type: 'code', difficulty: 'Hard', content: "Write a Python function to simulate the Monty Hall problem." }
                        ]
                    },
                    {
                        day: 3, topic: "Probability Distributions & NumPy",
                        learn: ["Bernoulli, Binomial, Poisson mechanics", "Normal, Uniform, Exponential PDF/CDF", "PMF vs PDF vs CDF", "NumPy Broadcasting & Vectorization"],
                        python: ["NumPy array creation & reshaping", "Broadcasting rules practice", "Simulating distributions (np.random)"],
                        practice: "Distribution matching problems",
                        review: "Create summary sheets for distributions",
                        dailySchedule: [
                            "Discrete Distributions: Bernoulli, Binomial (n, p)",
                            "Poisson Distribution: Lambda parameter & use cases",
                            "Continuous Distributions: Normal (Gaussian) Bell Curve",
                            "Understand PDF (Density) vs CDF (Cumulative)",
                            "Exponential & Uniform Distributions properties",
                            "NumPy: Arrays, Indexing, Slicing, Reshaping",
                            "NumPy: Broadcasting rules & Vectorized operations",
                            "NumPy: Random sampling (choice, shuffle, seed)",
                            "Simulate 1000 coin flips using NumPy",
                            "Plot Histogram of Normal Distribution samples",
                            "Practice: Match real-world scenarios to distributions",
                            "Review: Cheat sheet of PDF/PMF formulas"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Binomial vs Poisson distribution?" },
                            { type: 'code', difficulty: 'Medium', content: "Generate 1000 normal random numbers in NumPy." },
                            { type: 'question', difficulty: 'Easy', content: "Explain the difference between PDF and PMF." },
                            { type: 'question', difficulty: 'Medium', content: "Under what conditions does Binomial approximate Normal?" },
                            { type: 'code', difficulty: 'Hard', content: "Implement the formula for Poisson PMF from scratch." }
                        ]
                    },
                    {
                        day: 4, topic: "Sampling & Pandas Basics",
                        learn: ["Simple Random, Stratified, Cluster Sampling", "Central Limit Theorem (CLT) intuition", "Standard Error vs Standard Deviation", "Pandas: Series vs DataFrame, Indexing"],
                        python: ["Pandas loc/iloc", "Filtering & Sorting", "Aggregations (mean, sum, count)"],
                        practice: "Apply sampling techniques on a dataset",
                        review: "Solve mixed problems",
                        dailySchedule: [
                            "Sampling Methods: SRS, Stratified, Cluster, Systematic",
                            "Central Limit Theorem: Sampling Distribution of Mean",
                            "Standard Error calculation & interpretation",
                            "Confidence Intervals: Z-score vs T-score logic",
                            "Pandas: Reading CSV/Excel, DataFrame anatomy",
                            "Pandas: Selection using .loc (label) vs .iloc (position)",
                            "Pandas: Boolean Indexing & Filtering data",
                            "Pandas: Sorting values & resetting index",
                            "Hands-on: Verify CLT by sampling from a non-normal dist",
                            "Practice: Calculate 95% CI for a dataset column",
                            "Analysis: GroupBy basics (Split-Apply-Combine)",
                            "Review: Difference between SE and SD, Pandas basics"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Explain Central Limit Theorem." },
                            { type: 'code', difficulty: 'Medium', content: "Group by 'Category' and calculate mean 'Price'." },
                            { type: 'question', difficulty: 'Easy', content: "Difference between Stratified and Cluster sampling?" },
                            { type: 'code', difficulty: 'Medium', content: "Select a random 10% sample of rows from a DataFrame." },
                            { type: 'question', difficulty: 'Hard', content: "What is the difference between Standard Error and Standard Deviation?" }
                        ]
                    },
                    {
                        day: 5, topic: "Hypothesis Testing Fundamentals",
                        learn: ["Null vs Alternative Hypothesis formulation", "Type I (Alpha) vs Type II (Beta) Errors", "Power of a test", "One-tailed vs Two-tailed tests", "p-value interpretation (p-hacking)"],
                        python: ["Scipy.stats ttest_1samp, ttest_ind", "Chi-square test implementation"],
                        practice: "Hypothesis testing scenarios (A/B test setup)",
                        review: "Work through example problems",
                        dailySchedule: [
                            "Formulate Null (H0) and Alternative (H1) Hypotheses",
                            "Understand Significance Level (Alpha) & p-values",
                            "Type I Error (False Positive) vs Type II Error (False Negative)",
                            "Statistical Power: Factors affecting it (Sample size, Effect size)",
                            "Z-test vs T-test: When to use which?",
                            "One-Sample, Two-Sample, and Paired T-tests",
                            "Chi-Square Test of Independence logic",
                            "ANOVA (Analysis of Variance) basics",
                            "Python: Run T-tests using scipy.stats",
                            "Python: Calculate p-value from Z-score manually",
                            "Practice: 5 Hypothesis testing word problems",
                            "Review: Decision rules for rejecting H0"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Explain Type I vs Type II error." },
                            { type: 'question', difficulty: 'Easy', content: "Interpret a p-value of 0.04." },
                            { type: 'question', difficulty: 'Medium', content: "What is Statistical Power?" },
                            { type: 'code', difficulty: 'Medium', content: "Perform an Independent T-test using Scipy." },
                            { type: 'question', difficulty: 'Hard', content: "Explain the relationship between Alpha and Beta errors." }
                        ]
                    },
                    {
                        day: 6, topic: "Correlation, Regression & Adv Pandas",
                        learn: ["Covariance vs Correlation", "Pearson vs Spearman Rank", "R-squared vs Adjusted R-squared", "Assumptions of Linear Regression", "Pandas: Merge, Join, Concat, Pivot"],
                        python: ["Pandas merge (inner, outer, left, right)", "Correlation matrix heatmap", "Simple Linear Regression with Statsmodels"],
                        practice: "Regression interpretation & Pandas data wrangling",
                        review: "Problem Solving",
                        dailySchedule: [
                            "Covariance calculation & limitations",
                            "Pearson Correlation (Linear) vs Spearman (Monotonic)",
                            "Linear Regression: Line of Best Fit (OLS)",
                            "Assumptions: Linearity, Homoscedasticity, Normality, No Multicollinearity",
                            "Interpreting Regression Coefficients & Intercept",
                            "Metric: R-squared vs Adjusted R-squared",
                            "Pandas: Merge vs Join vs Concat mechanics",
                            "Pandas: Pivot Tables & Melt (Reshaping data)",
                            "Python: Calculate correlation matrix on dataset",
                            "Python: Fit a simple regression model (statsmodels)",
                            "Practice: Diagnose heteroscedasticity in residual plot",
                            "Review: Regression assumptions & Pandas reshaping"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Pearson vs Spearman correlation?" },
                            { type: 'code', difficulty: 'Hard', content: "Perform an inner join on two dataframes." },
                            { type: 'question', difficulty: 'Easy', content: "List the assumptions of Linear Regression." },
                            { type: 'question', difficulty: 'Medium', content: "How do you interpret R-squared?" },
                            { type: 'code', difficulty: 'Hard', content: "Calculate Pearson correlation coefficient manually." }
                        ]
                    },
                    {
                        day: 7, topic: "Week 1 Consolidation & Mock Interviews",
                        learn: ["Comprehensive Stats Review", "Python Data Structures Deep Dive"],
                        python: ["Live Coding: Stats from scratch", "Mock Interview Simulation"],
                        practice: "Create Week 1 Cheat Sheet",
                        review: "Full Week 1 Review",
                        dailySchedule: [
                            "Review: Descriptive Statistics & Probability Rules",
                            "Review: Distributions & Hypothesis Testing logic",
                            "Review: Python Lists, Dicts, Sets complexity (Big O)",
                            "Review: Pandas Indexing, Merging, GroupBy",
                            "Coding: Implement T-test logic without scipy",
                            "Coding: Data manipulation challenge (Pandas)",
                            "Mock Interview: Explain p-value to a stakeholder",
                            "Mock Interview: Python coding problem (Arrays/Strings)",
                            "Quiz: 30 rapid-fire statistics questions",
                            "Project: Analyze a small dataset end-to-end",
                            "Create Week 1 Cheat Sheet (Formulas + Syntax)",
                            "Plan for Week 2: Identify weak spots"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Explain p-value to a non-technical person." },
                            { type: 'code', difficulty: 'Hard', content: "Live coding: Solve a medium statistics problem." },
                            { type: 'question', difficulty: 'Easy', content: "Explain the Central Limit Theorem to a 5-year-old." },
                            { type: 'question', difficulty: 'Medium', content: "How do you handle duplicate rows in Pandas?" },
                            { type: 'code', difficulty: 'Hard', content: "Write a function to find the k-th largest element in an array." }
                        ]
                    }
                ]
            },
            2: {
                title: "Data Preprocessing & Visualization",
                days: [
                    {
                        day: 8, topic: "Data Cleaning Fundamentals",
                        learn: ["Missing Data Types (MCAR, MAR, NMAR)", "Imputation: Mean/Median vs KNN vs MICE", "Outliers: Z-score vs IQR vs Winsorization"],
                        python: ["Pandas isna(), dropna(), fillna()", "Detecting outliers with boxplots", "Scikit-learn SimpleImputer"],
                        practice: "Clean a messy dataset (Titanic/Housing)",
                        review: "Revision Session",
                        dailySchedule: [
                            "Identify Missingness: MCAR, MAR, NMAR",
                            "Imputation Strategies: Mean/Median/Mode",
                            "Advanced Imputation: KNN & MICE concepts",
                            "Outlier Detection: Z-Score method (Normal dist)",
                            "Outlier Detection: IQR method (Skewed dist)",
                            "Handling Outliers: Trimming vs Capping (Winsorizing)",
                            "Python: Analyze missing data patterns (heatmap)",
                            "Python: Implement KNN imputation with sklearn",
                            "Python: Write a function to filter outliers via IQR",
                            "Practice: Clean 'Titanic' age & cabin columns",
                            "Hands-on: Compare mean vs median imputation results",
                            "Review: Pros/cons of dropping vs imputing rows"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "When to drop rows vs impute?" },
                            { type: 'code', difficulty: 'Medium', content: "Detect outliers using IQR." },
                            { type: 'question', difficulty: 'Easy', content: "Difference between MCAR and MNAR?" },
                            { type: 'code', difficulty: 'Medium', content: "Fill missing values with the median of the group." },
                            { type: 'question', difficulty: 'Hard', content: "What are the pros and cons of KNN imputation?" }
                        ]
                    },
                    {
                        day: 9, topic: "Transformation & Feature Engineering",
                        learn: ["Scaling: StandardScaler vs MinMaxScaler vs RobustScaler", "Encoding: Label vs One-Hot vs Target Encoding", "Feature Interaction & Polynomials", "Log/Box-Cox Transforms"],
                        python: ["Sklearn: StandardScaler, OneHotEncoder", "Pandas: get_dummies, map", "Scipy: Box-Cox"],
                        practice: "Feature engineering on Housing dataset",
                        review: "Create transformation cheat sheet",
                        dailySchedule: [
                            "Standardization (Z-score scaling) vs Normalization (Min-Max)",
                            "Robust Scaler (Median/IQR) for outliers",
                            "Categorical Encoding: Nominal (One-Hot) vs Ordinal (Label)",
                            "Target Encoding & Frequency Encoding risks",
                            "Feature Construction: Binning/Discretization",
                            "Handling Skewed Data: Log, Sqrt, Box-Cox Transforms",
                            "Feature Interactions: Creating A*B, A/B features",
                            "Python: Build a preprocessing pipeline step",
                            "Python: Apply transformations to a dataset",
                            "Practice: Engineer 5 new features for Housing data",
                            "Concept: Curse of Dimensionality (One-Hot issue)",
                            "Review: When to fit_transform vs transform"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Normalization vs Standardization?" },
                            { type: 'question', difficulty: 'Hard', content: "Explain Target Encoding." },
                            { type: 'question', difficulty: 'Easy', content: "Why do we scale features for KNN?" },
                            { type: 'code', difficulty: 'Medium', content: "Implement Min-Max scaling from scratch." },
                            { type: 'question', difficulty: 'Hard', content: "How do you handle high-cardinality categorical features?" }
                        ]
                    },
                    {
                        day: 10, topic: "Visualization with Matplotlib",
                        learn: ["Anatomy of a Plot (Figure, Axes)", "Plot Types: Line, Scatter, Bar, Hist", "Subplots & Layouts", "Color Theory Basics"],
                        python: ["Matplotlib Pyplot API vs OO API", "Customizing Ticks, Labels, Legends", "Saving Figures"],
                        practice: "Recreate complex charts from scratch",
                        review: "Revision Session",
                        dailySchedule: [
                            "Matplotlib Architecture: Figure, Axes, Axis",
                            "Line Plots & Scatter Plots: Trends & Correlations",
                            "Bar Charts & Histograms: Distributions & Counts",
                            "Box Plots & Whiskers: Understanding the visual stats",
                            "Subplots: Creating grids of charts (plt.subplots)",
                            "Customization: Titles, Labels, Legends, Fonts",
                            "Color Palettes & Markers styling",
                            "Python: Create a dual-axis chart (twinx)",
                            "Python: Visualize dataset outliers with Boxplots",
                            "Practice: Create a dashboard-like 2x2 grid",
                            "Concept: Avoiding Chart Junk & clutter",
                            "Review: Matplotlib Object-Oriented vs State-based interface"
                        ],
                        aiCues: [
                            { type: 'code', difficulty: 'Medium', content: "Create a 2x2 subplot with different charts." },
                            { type: 'question', difficulty: 'Easy', content: "When to use a Histogram?" },
                            { type: 'question', difficulty: 'Easy', content: "Name the components of a Matplotlib Figure." },
                            { type: 'code', difficulty: 'Medium', content: "Draw a scatter plot with different colors for classes." },
                            { type: 'question', difficulty: 'Hard', content: "When to use a Boxplot vs Violin plot?" }
                        ]
                    },
                    {
                        day: 11, topic: "Advanced Visualization with Seaborn",
                        learn: ["Seaborn vs Matplotlib", "Distribution Plots (KDE, Rug)", "Categorical Plots (Violin, Swarm, Strip)", "Multivariate Viz (Hue, Style, Size)"],
                        python: ["Seaborn Pairplot, Jointplot", "Heatmaps for Correlation", "FacetGrid"],
                        practice: "EDA on Iris/Tips dataset",
                        review: "Best practices summary",
                        dailySchedule: [
                            "Seaborn Philosophy: High-level wrapper & Pandas integration",
                            "Univariate Dist: Histplot, KDE plot, ECDF",
                            "Bivariate Dist: Jointplot (Scatter + Hist/KDE)",
                            "Categorical: Boxplot vs Violin Plot (Density info)",
                            "Categorical: Strip Plot & Swarm Plot (Raw data points)",
                            "Multivariate: Adding Hue, Size, Style semantics",
                            "Matrix Plots: Heatmaps & Clustermaps",
                            "Pairplot: Pairwise relationships in dataset",
                            "FacetGrid: Small Multiples visualization",
                            "Python: Create a correlation heatmap with annotations",
                            "Practice: Visualize 'Tips' dataset relationships",
                            "Review: Choosing the right chart for the data type"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Seaborn vs Matplotlib?" },
                            { type: 'code', difficulty: 'Easy', content: "Create a Seaborn pairplot." },
                            { type: 'question', difficulty: 'Easy', content: "What is a FacetGrid?" },
                            { type: 'code', difficulty: 'Medium', content: "Create a heatmap of a correlation matrix." },
                            { type: 'question', difficulty: 'Hard', content: "How to visualize interaction effects between three variables?" }
                        ]
                    },
                    {
                        day: 12, topic: "Feature Selection & Dimensionality",
                        learn: ["Filter vs Wrapper vs Embedded Methods", "Variance Threshold", "Correlation Removal", "RFE & Forward Selection", "PCA: Eigenvalues/vectors, Variance Ratio"],
                        python: ["Sklearn SelectKBest, RFE", "PCA implementation & Scree Plot", "Lasso for selection"],
                        practice: "Reduce dimensionality of MNIST/Digits",
                        review: "Revision Session",
                        dailySchedule: [
                            "Feature Selection Strategies: Filter, Wrapper, Embedded",
                            "Filter: Variance Threshold, Correlation Matrix",
                            "Filter: Chi-Square, ANOVA F-value, Mutual Information",
                            "Wrapper: Recursive Feature Elimination (RFE)",
                            "Embedded: Lasso (L1) Regularization coefficients",
                            "Dimensionality Reduction intuition",
                            "PCA: Covariance Matrix, Eigenvectors, Eigenvalues",
                            "PCA: Explained Variance Ratio & Scree Plot",
                            "Python: Implement PCA pipeline on Digits data",
                            "Python: Use RFE to select top 5 features",
                            "Practice: Interpret PCA components loadings",
                            "Review: When to use PCA (Collinearity, Viz, Noise)"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Explain PCA variance explained." },
                            { type: 'question', difficulty: 'Medium', content: "Filter vs Wrapper methods?" },
                            { type: 'question', difficulty: 'Easy', content: "What is the curse of dimensionality?" },
                            { type: 'code', difficulty: 'Medium', content: "Implement Recursive Feature Elimination (RFE)." },
                            { type: 'question', difficulty: 'Hard', content: "Geometric interpretation of Eigenvalues in PCA." }
                        ]
                    },
                    {
                        day: 13, topic: "Complete Data Pipeline Project",
                        learn: ["Pipeline Architecture", "Data Leakage Prevention", "Reproducibility"],
                        python: ["Sklearn Pipeline & ColumnTransformer", "Custom Transformers", "End-to-end Script"],
                        practice: "Build a clean pipeline for a raw dataset",
                        review: "Create preprocessing checklist",
                        dailySchedule: [
                            "Define Project Goal & Data Dictionary",
                            "Load Raw Data & Initial EDA (Structure, Missingness)",
                            "Split Data: Train/Test Split strategies",
                            "Build Preprocessing Pipeline: Imputation steps",
                            "Build Preprocessing Pipeline: Scaling & Encoding",
                            "Integrate Feature Selection step",
                            "Prevent Data Leakage: Fit on Train, Transform Test",
                            "Use Sklearn ColumnTransformer for mixed types",
                            "Write Custom Transformer class (fit/transform)",
                            "Save Processed Data for Modeling",
                            "Document findings and preprocessing decisions",
                            "Review: Verify no leakage in transformation steps"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Steps in a data pipeline?" },
                            { type: 'code', difficulty: 'Medium', content: "Document a function with docstrings." },
                            { type: 'question', difficulty: 'Easy', content: "Why prevent data leakage in pipelines?" },
                            { type: 'question', difficulty: 'Medium', content: "How to handle mixed data types in a single pipeline?" },
                            { type: 'code', difficulty: 'Hard', content: "Create a custom TransformerMixin class." }
                        ]
                    },
                    {
                        day: 14, topic: "Week 2 Consolidation & Practice",
                        learn: ["Review: Cleaning & Engineering", "Review: Visualization Principles", "Review: PCA Math"],
                        python: ["Mock EDA Interview", "Coding: Data Wrangling challenge"],
                        practice: "Create Week 2 Cheat Sheet",
                        review: "Full Week 2 Review",
                        dailySchedule: [
                            "Review: Missing Data imputation flowcharts",
                            "Review: Outlier detection criteria",
                            "Review: Scaling vs Normalization use cases",
                            "Review: Visualization choices (Cat vs Num)",
                            "Review: PCA mathematics & geometric interpretation",
                            "Coding: Cleaning a 'dirty' string column in Pandas",
                            "Coding: Reshaping complex dataset (Pivot/Melt)",
                            "Mock Interview: Explain Feature Engineering steps",
                            "Mock Interview: Interpret a Boxplot & Heatmap",
                            "Quiz: 30 questions on Sklearn preprocessing",
                            "Create Week 2 Cheat Sheet (Code snippets)",
                            "Plan for Week 3: ML Algorithms setup"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Handling imbalanced data?" },
                            { type: 'code', difficulty: 'Hard', content: "Clean a messy json dataset." },
                            { type: 'question', difficulty: 'Easy', content: "Explain the One-Hot Encoding trap." },
                            { type: 'code', difficulty: 'Medium', content: "Identify and remove highly correlated features." },
                            { type: 'question', difficulty: 'Hard', content: "System design for a data cleaning pipeline." }
                        ]
                    }
                ]
            },
            3: {
                title: "ML Algorithms & SQL Basics",
                days: [
                    {
                        day: 15, topic: "ML Fundamentals & Linear Regression",
                        learn: ["Supervised vs Unsupervised", "Loss Functions (MSE, MAE)", "Gradient Descent Variants", "Linear Regression Assumptions Deep Dive", "Regularization Math (L1 vs L2)"],
                        python: ["Gradient Descent from scratch", "Statsmodels vs Sklearn LinearReg", "Plotting Residuals"],
                        practice: "Diagnose model fit issues",
                        review: "Revision Session",
                        dailySchedule: [
                            "ML Workflow: Data -> Model -> Loss -> Optimizer",
                            "Loss Functions: MSE (L2), MAE (L1), Huber Loss",
                            "Gradient Descent: Batch, Stochastic, Mini-batch",
                            "Linear Regression: OLS derivation concept",
                            "Assumptions Check: Residuals vs Fitted plot",
                            "Interpretation: R-squared, P-values of coefficients",
                            "Regularization: Ridge (L2) shrinking coeffs",
                            "Regularization: Lasso (L1) feature selection",
                            "Python: Implement simple gradient descent loop",
                            "Python: Train Linear Regression & check coefficients",
                            "Practice: Predict Housing Prices & analyze errors",
                            "Review: Bias-Variance Decomposition intro"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Assumptions of Linear Regression?" },
                            { type: 'question', difficulty: 'Hard', content: "Bias-Variance Tradeoff?" },
                            { type: 'question', difficulty: 'Easy', content: "Meaning of the intercept term?" },
                            { type: 'code', difficulty: 'Medium', content: "Implement MSE loss function." },
                            { type: 'question', difficulty: 'Hard', content: "Derivation of OLS solution (conceptually)." }
                        ]
                    },
                    {
                        day: 16, topic: "Logistic Regression & Classification",
                        learn: ["Sigmoid Function & Decision Boundary", "Log-Loss (Binary Cross Entropy)", "Odds Ratio & Logits", "Multiclass: OVR vs Softmax", "Metrics: Accuracy, Precision, Recall, F1"],
                        python: ["Sklearn LogisticRegression params (C, penalty)", "Confusion Matrix visualization", "ROC Curve plotting"],
                        practice: "Classification on Titanic dataset",
                        review: "Create metrics cheat sheet",
                        dailySchedule: [
                            "Logistic Function (Sigmoid) properties",
                            "Log-Likelihood & Log-Loss cost function",
                            "Interpreting Coefficients in Log-Odds terms",
                            "Decision Boundary mathematics",
                            "Multiclass: One-vs-Rest vs Multinomial (Softmax)",
                            "Confusion Matrix: TP, TN, FP, FN",
                            "Metrics: Precision, Recall, F1-Score, Accuracy",
                            "ROC Curve & AUC Score interpretation",
                            "Python: Fit Logistic Regression & tune 'C'",
                            "Python: Plot ROC curve for a classifier",
                            "Practice: Handle Imbalanced Classes (Class weights)",
                            "Review: Linear vs Logistic Regression comparison"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Precision vs Recall?" },
                            { type: 'question', difficulty: 'Hard', content: "Explain ROC-AUC." },
                            { type: 'question', difficulty: 'Easy', content: "Why use Log Loss instead of MSE for classification?" },
                            { type: 'code', difficulty: 'Medium', content: "Implement Sigmoid function." },
                            { type: 'question', difficulty: 'Hard', content: "Explain the odds ratio interpretation." }
                        ]
                    },
                    {
                        day: 17, topic: "Decision Trees & Ensembles (Part 1)",
                        learn: ["Tree Splitting: Entropy, Info Gain, Gini", "Stopping Criteria & Pruning", "Ensemble Concept: Bias/Variance reduction", "Bagging: Bootstrap Aggregation", "Random Forest Mechanics"],
                        python: ["Visualize Decision Tree (graphviz)", "GridSearch RF Hyperparams", "Feature Importance extraction"],
                        practice: "Tuning a Random Forest model",
                        review: "Revision Session",
                        dailySchedule: [
                            "Decision Tree Structure: Root, Node, Leaf",
                            "Splitting Criteria: Gini Impurity vs Entropy",
                            "Information Gain calculation",
                            "Overfitting in Trees: Max Depth, Min Samples Split",
                            "Ensemble Learning: Wisdom of Crowds",
                            "Bagging: Bootstrap Sampling + Aggregation",
                            "Random Forest: Feature Subsampling intuition",
                            "Out-of-Bag (OOB) Error estimation",
                            "Python: Train Decision Tree & visualize splits",
                            "Python: Train Random Forest & plot importances",
                            "Practice: Tune n_estimators & max_depth",
                            "Review: Trees vs Linear Models pros/cons"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "How does Random Forest reduce variance?" },
                            { type: 'question', difficulty: 'Medium', content: "Gini Impurity vs Entropy?" },
                            { type: 'question', difficulty: 'Easy', content: "What is pruning in Decision Trees?" },
                            { type: 'code', difficulty: 'Medium', content: "Calculate Gini Impurity for a split." },
                            { type: 'question', difficulty: 'Hard', content: "Explain the concept of Out-of-Bag error." }
                        ]
                    },
                    {
                        day: 18, topic: "Ensembles (Part 2) & Algorithms",
                        learn: ["Boosting Concept: Sequential Correction", "AdaBoost vs Gradient Boosting", "XGBoost/LightGBM Innovations", "SVM: Margin, Support Vectors, Kernels", "KNN & Naive Bayes Basics"],
                        python: ["XGBoost implementation", "SVM Kernel comparison", "KNN K-value loop"],
                        practice: "Algorithm comparison project",
                        review: "Create ML comparison chart",
                        dailySchedule: [
                            "Boosting: Learning from mistakes (residuals)",
                            "AdaBoost: Sample weighting mechanics",
                            "Gradient Boosting (GBM): Gradient descent in function space",
                            "XGBoost: Regularization, Second order derivative",
                            "SVM: Hyperplane, Margins, Support Vectors",
                            "SVM Kernels: Linear, Polynomial, RBF (Gamma)",
                            "KNN: Distance metrics, K selection, Scaling need",
                            "Naive Bayes: Conditional Independence assumption",
                            "Python: Train XGBoost classifier",
                            "Python: Visualize SVM decision boundaries",
                            "Practice: Compare 5 algos on one dataset",
                            "Review: Parametric vs Non-Parametric models"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Gradient Boosting vs Random Forest?" },
                            { type: 'question', difficulty: 'Medium', content: "Kernel Trick in SVM?" },
                            { type: 'question', difficulty: 'Easy', content: "Bagging vs Boosting." },
                            { type: 'question', difficulty: 'Medium', content: "What is a Support Vector?" },
                            { type: 'code', difficulty: 'Hard', content: "Implement a simple K-Nearest Neighbors prediction." }
                        ]
                    },
                    {
                        day: 19, topic: "SQL Fundamentals",
                        learn: ["RDBMS concepts: Tables, Rows, Columns", "Primary Keys, Foreign Keys, Schema", "SQL Order of Execution", "SELECT, WHERE, DISTINCT, LIMIT", "Aggregates: COUNT, SUM, AVG, MIN, MAX"],
                        python: ["SQLite basics in Python", "Practice queries on LeetCode"],
                        practice: "15 Basic SQL Queries",
                        review: "SQL Syntax Summary",
                        dailySchedule: [
                            "Database Normalization (1NF, 2NF, 3NF)",
                            "Primary Keys vs Foreign Keys Constraints",
                            "SQL Syntax: SELECT, FROM, LIMIT, OFFSET",
                            "Filtering: WHERE, AND, OR, IN, BETWEEN, LIKE",
                            "Sorting: ORDER BY (ASC/DESC), Multiple columns",
                            "Aggregates: COUNT, SUM, AVG basics",
                            "Grouping: GROUP BY logic",
                            "Filtering Groups: HAVING vs WHERE",
                            "Order of Execution (FROM -> WHERE -> GROUP -> SELECT...)",
                            "Python: Connect to SQLite & run SELECT",
                            "Practice: Solve 'Employees earning more than managers'",
                            "Review: SQL Null handling"
                        ],
                        aiCues: [
                            { type: 'code', difficulty: 'Easy', content: "SQL query with GROUP BY and HAVING." },
                            { type: 'question', difficulty: 'Easy', content: "Order of execution in SQL?" },
                            { type: 'question', difficulty: 'Easy', content: "Primary Key vs Unique Key." },
                            { type: 'code', difficulty: 'Medium', content: "Query to find the second highest salary." },
                            { type: 'question', difficulty: 'Hard', content: "Explain ACID properties." }
                        ]
                    },
                    {
                        day: 20, topic: "Advanced SQL Concepts",
                        learn: ["JOINS: Inner, Left, Right, Full, Cross", "Self Joins & use cases", "Subqueries: Scalar, Correlated", "Window Functions: Rank, Lead, Lag, Rolling", "CTEs (Common Table Expressions)"],
                        python: ["Complex queries", "Window functions practice"],
                        practice: "Medium/Hard SQL Problems",
                        review: "Create SQL quick reference",
                        dailySchedule: [
                            "Inner Join vs Left Join vs Full Outer Join",
                            "Cross Join & Self Join scenarios",
                            "Subqueries in SELECT, FROM, and WHERE clauses",
                            "Correlated Subqueries performance issues",
                            "CTEs: WITH clause for readability",
                            "Window Functions: PARTITION BY, ORDER BY",
                            "Ranking: ROW_NUMBER, RANK, DENSE_RANK",
                            "Offset: LEAD, LAG for time series/comparison",
                            "Aggregates: Rolling Sum/Avg using Windowing",
                            "String & Date Functions (COALESCE, EXTRACT)",
                            "Practice: Calculate 3-day rolling average",
                            "Review: Window Frames (ROWS BETWEEN)"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Rank vs Dense_Rank?" },
                            { type: 'code', difficulty: 'Hard', content: "Write a query using a Window Function." },
                            { type: 'question', difficulty: 'Easy', content: "LEAD vs LAG functions." },
                            { type: 'code', difficulty: 'Medium', content: "Calculate running total using window functions." },
                            { type: 'question', difficulty: 'Hard', content: "How to optimize a slow SQL query?" }
                        ]
                    },
                    {
                        day: 21, topic: "Week 3 Consolidation",
                        learn: ["Review: ML Algorithms Pros/Cons", "Review: SQL Patterns"],
                        python: ["Mock ML Interview", "Mock SQL Interview"],
                        practice: "Create Week 3 Cheat Sheet",
                        review: "Weeks 1-2 Spaced Repetition",
                        dailySchedule: [
                            "Review: Linear/Logistic Regression Math",
                            "Review: Random Forest vs GBM trade-offs",
                            "Review: SVM & KNN hyperparameters",
                            "Review: Metrics (Precision/Recall/AUC)",
                            "Review: SQL Join types & Venn diagrams",
                            "Review: SQL Window function syntax",
                            "Coding: Implement K-Means from scratch (logic)",
                            "SQL: Solve 'Top N per group' problem",
                            "Mock Interview: Explain Bias-Variance to PM",
                            "Quiz: 30 ML + SQL questions",
                            "Create Week 3 Cheat Sheet (Algos + SQL)",
                            "Plan for Week 4: Deep Learning & DBMS"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Explain the entire Random Forest algorithm." },
                            { type: 'code', difficulty: 'Hard', content: "Complex SQL query involving Self Join." },
                            { type: 'question', difficulty: 'Easy', content: "Explain K-Means clustering steps." },
                            { type: 'code', difficulty: 'Medium', content: "SQL query to find duplicates." },
                            { type: 'question', difficulty: 'Hard', content: "Bias-Variance tradeoff in Ensemble methods." }
                        ]
                    }
                ]
            },
            4: {
                title: "DBMS & Deep Learning",
                days: [
                    {
                        day: 22, topic: "Advanced DBMS Concepts",
                        learn: ["Transactions (ACID)", "Indexing (B-Tree, Clustered)", "Query Optimization (EXPLAIN)", "NoSQL: Document, Key-Value, Columnar", "CAP Theorem"],
                        python: ["Using Indexes in SQL", "MongoDB basic queries"],
                        practice: "Design a simple DB schema",
                        review: "Revision Session",
                        dailySchedule: [
                            "ACID Properties: Atomicity, Consistency, Isolation, Durability",
                            "Transactions: COMMIT, ROLLBACK",
                            "Indexing: B-Trees, Clustered vs Non-Clustered",
                            "Query Optimization: Reading EXPLAIN plans",
                            "Views vs Stored Procedures vs Triggers",
                            "NoSQL Types: Document (Mongo), Key-Value (Redis)",
                            "CAP Theorem: Consistency, Availability, Partition Tol",
                            "Database Sharding vs Replication",
                            "Practice: Optimize a slow query with Index",
                            "Practice: Design Schema for E-commerce app",
                            "Python: Insert/Query data in MongoDB",
                            "Review: SQL vs NoSQL use cases"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Primary Key vs Foreign Key?" },
                            { type: 'question', difficulty: 'Hard', content: "How to optimize a slow SQL query?" },
                            { type: 'question', difficulty: 'Easy', content: "SQL vs NoSQL." },
                            { type: 'question', difficulty: 'Medium', content: "What is Database Normalization?" },
                            { type: 'code', difficulty: 'Hard', content: "Design a schema for a ride-sharing app." }
                        ]
                    },
                    {
                        day: 23, topic: "DBMS for Data Science",
                        learn: ["Analytical SQL (OLAP)", "Dates/Timestamps Math", "Text Processing (Regex, String funcs)", "Python DB Connectors (SQLAlchemy)", "ETL Basics"],
                        python: ["Pandas read_sql", "SQLAlchemy connections", "Date manipulation"],
                        practice: "Solve Business Case Studies with SQL",
                        review: "Final DBMS Cheat Sheet",
                        dailySchedule: [
                            "SQL for Analysis: Funnel Analysis, Retention",
                            "Date/Time: DATE_TRUNC, DATEDIFF, Intervals",
                            "Text: LIKE, Wildcards, SUBSTRING, Regex",
                            "Handling NULLs: COALESCE, NULLIF logic",
                            "Python: Connecting via SQLAlchemy/psycopg2",
                            "Python: Loading SQL results into Pandas",
                            "ETL Concepts: Extract, Transform, Load flows",
                            "Case Study: Monthly Active Users (MAU) query",
                            "Case Study: Churn Rate calculation query",
                            "Practice: Text parsing in SQL",
                            "Review: Efficient Data Types (Int vs Varchar)",
                            "Create DBMS Cheat Sheet"
                        ],
                        aiCues: [
                            { type: 'code', difficulty: 'Medium', content: "Connect Python to a database." },
                            { type: 'code', difficulty: 'Medium', content: "Extract year from date in SQL." },
                            { type: 'question', difficulty: 'Easy', content: "What is an ETL pipeline?" },
                            { type: 'code', difficulty: 'Medium', content: "SQL query to calculate retention rate." },
                            { type: 'question', difficulty: 'Hard', content: "Handling NULLs in aggregations." }
                        ]
                    },
                    {
                        day: 24, topic: "Neural Networks Fundamentals",
                        learn: ["Perceptron & Neuron Model", "Activation Functions (Sigmoid, Tanh, ReLU)", "Forward Propagation Math", "Loss Functions (MSE, Cross-Entropy)", "Backpropagation Intuition"],
                        python: ["Keras Sequential Model", "Building a Dense Network"],
                        practice: "MNIST digit classification",
                        review: "Revision Session",
                        dailySchedule: [
                            "Biological inspiration: Neuron & Synapse",
                            "Perceptron: Weights, Bias, Weighted Sum",
                            "Activations: Sigmoid (0-1), Tanh (-1-1), ReLU (0-inf)",
                            "Why Non-linearity is crucial",
                            "Forward Pass: Matrix multiplications",
                            "Loss Functions: MSE (Regression), Cross-Entropy (Class)",
                            "Gradient Descent in NN context",
                            "Backpropagation: Chain Rule logic",
                            "TensorFlow/Keras: Sequential API basics",
                            "Python: Build a simple MLP for regression",
                            "Practice: Train MLP on MNIST dataset",
                            "Review: Universal Approximation Theorem concept"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Easy', content: "What is an activation function?" },
                            { type: 'question', difficulty: 'Hard', content: "Explain Backpropagation intuitively." },
                            { type: 'question', difficulty: 'Easy', content: "What is a perceptron?" },
                            { type: 'code', difficulty: 'Medium', content: "Implement ReLU function and its derivative." },
                            { type: 'question', difficulty: 'Hard', content: "Why do we need non-linear activation functions?" }
                        ]
                    },
                    {
                        day: 25, topic: "Deep Learning Training",
                        learn: ["Optimizers (SGD, Momentum, Adam)", "Learning Rate Scheduling", "Regularization: Dropout, L1/L2", "Batch Normalization", "Weight Initialization (He, Xavier)"],
                        python: ["Keras Callbacks (EarlyStopping)", "Plotting Loss Curves"],
                        practice: "Tune MNIST model to >98%",
                        review: "Create DL Training Tips Sheet",
                        dailySchedule: [
                            "Optimizers: SGD, Momentum, RMSProp, Adam",
                            "Learning Rate: Decay & Scheduling",
                            "Vanishing/Exploding Gradients problem",
                            "Weight Initialization: Xavier/Glorot vs He",
                            "Regularization: Dropout Layers mechanics",
                            "Batch Normalization: Internal Covariate Shift",
                            "Early Stopping: Preventing overfitting",
                            "Epochs vs Batch Size vs Iterations",
                            "Python: Implement Dropout & BatchNorm in Keras",
                            "Python: Use LearningRateScheduler callback",
                            "Practice: Diagnose Overfitting from Loss Curves",
                            "Review: Training loop steps"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Why use Batch Normalization?" },
                            { type: 'question', difficulty: 'Medium', content: "What is Dropout?" },
                            { type: 'question', difficulty: 'Easy', content: "What is an Epoch?" },
                            { type: 'question', difficulty: 'Medium', content: "Explain the Vanishing Gradient problem." },
                            { type: 'code', difficulty: 'Hard', content: "Implement Gradient Descent update step." }
                        ]
                    },
                    {
                        day: 26, topic: "Convolutional Neural Networks (CNN)",
                        learn: ["Image Representation (Pixels, Channels)", "Convolution Operation (Kernels)", "Padding & Stride", "Pooling (Max, Average)", "Architectures: VGG, ResNet"],
                        python: ["Keras Conv2D, MaxPooling2D", "Transfer Learning (ResNet50)"],
                        practice: "CIFAR-10 Image Classification",
                        review: "Revision Session",
                        dailySchedule: [
                            "Image Data: Height x Width x Channels",
                            "Convolution: Feature extraction filters",
                            "Stride & Padding (Valid vs Same)",
                            "Pooling: Dimensionality reduction (Max vs Avg)",
                            "Flattening & Fully Connected Layers",
                            "CNN Architecture: LeNet, AlexNet, VGG patterns",
                            "ResNet: Skip Connections/Residual Blocks",
                            "Transfer Learning: Pre-trained models (ImageNet)",
                            "Python: Build a simple CNN from scratch",
                            "Python: Fine-tune MobileNet/ResNet",
                            "Practice: Classify CIFAR-10 images",
                            "Review: Receptive Field concept"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "What is a Convolution operation?" },
                            { type: 'question', difficulty: 'Medium', content: "Max Pooling vs Average Pooling?" },
                            { type: 'question', difficulty: 'Easy', content: "What is a channel in an image?" },
                            { type: 'question', difficulty: 'Medium', content: "Calculate output size after a convolution layer." },
                            { type: 'code', difficulty: 'Hard', content: "Implement a 2D convolution operation (naive)." }
                        ]
                    },
                    {
                        day: 27, topic: "Recurrent Neural Networks (RNN)",
                        learn: ["Sequence Data Processing", "RNN Architecture & Unrolling", "Vanishing Gradient in RNN", "LSTM (Gates)", "GRU (Simplified LSTM)"],
                        python: ["Keras SimpleRNN, LSTM, GRU", "Time Series Formatting"],
                        practice: "Sentiment Analysis or Stock Forecasting",
                        review: "RNN Summary",
                        dailySchedule: [
                            "Sequential Data: Time Series, Text, Audio",
                            "RNN Cell: Hidden State & Recurrence",
                            "Backpropagation Through Time (BPTT)",
                            "Issue: Short-term memory & Vanishing Gradients",
                            "LSTM: Forget, Input, Output Gates mechanics",
                            "GRU: Update & Reset Gates (Simplified)",
                            "Embedding Layers for Text data",
                            "Many-to-One vs Many-to-Many architectures",
                            "Python: Prepare sequences (padding/truncating)",
                            "Python: Train LSTM for Sentiment Analysis",
                            "Practice: Predict next value in Time Series",
                            "Review: CNN vs RNN use cases"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "Vanishing Gradient Problem?" },
                            { type: 'question', difficulty: 'Hard', content: "LSTM vs GRU?" },
                            { type: 'question', difficulty: 'Easy', content: "Why are RNNs good for text?" },
                            { type: 'question', difficulty: 'Medium', content: "Concept of 'Forget Gate' in LSTM." },
                            { type: 'code', difficulty: 'Hard', content: "Prepare a time-series dataset for LSTM (windowing)." }
                        ]
                    },
                    {
                        day: 28, topic: "DL Applications & Deployment",
                        learn: ["NLP: Word Embeddings (Word2Vec)", "Unsupervised DL: Autoencoders", "Generative: GANs Basics", "Deployment: Model Saving, API", "Transformers: Attention Mechanism"],
                        python: ["Save/Load Keras Models", "Flask/FastAPI basic endpoint"],
                        practice: "Deploy a model locally",
                        review: "Revision Session",
                        dailySchedule: [
                            "NLP: One-hot vs Word Embeddings (Dense vectors)",
                            "Word2Vec: CBOW vs Skip-gram intuition",
                            "Attention Mechanism & Transformer revolution",
                            "Autoencoders: Encoder-Decoder, Latent Space",
                            "GANs: Generator vs Discriminator basics",
                            "Model Serialization: .h5, .pkl, SavedModel",
                            "Inference: Batch prediction vs Real-time API",
                            "Deployment: Basic Flask App structure",
                            "Python: Save model and reload for prediction",
                            "Python: Create a '/predict' API route",
                            "Practice: Wrap MNIST model in an API",
                            "Review: End-to-End DL Pipeline"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Medium', content: "What are Word Embeddings?" },
                            { type: 'question', difficulty: 'Hard', content: "Concept of GANs?" },
                            { type: 'question', difficulty: 'Easy', content: "What is Transfer Learning?" },
                            { type: 'code', difficulty: 'Medium', content: "Tokenize a sentence for NLP." },
                            { type: 'question', difficulty: 'Hard', content: "How does the Attention mechanism work?" }
                        ]
                    }
                ]
            },
            5: {
                title: "Final Review & Interviews",
                days: [
                    {
                        day: 29, topic: "Comprehensive Review",
                        learn: ["Full Curriculum Recap", "System Design Basics", "Metric Hierarchy"],
                        python: ["Full Mock Interview (Technical)", "Whiteboarding practice"],
                        practice: "Target Weak Areas",
                        review: "Identify Focus Areas",
                        dailySchedule: [
                            "Review Week 1: Statistics & Probabilities",
                            "Review Week 2: Data Processing & Viz",
                            "Review Week 3: Machine Learning Algorithms",
                            "Review Week 4: SQL & Deep Learning",
                            "System Design: ML Pipeline architecture",
                            "System Design: Metric Selection (Business vs Proxy)",
                            "System Design: Serving & Monitoring drift",
                            "Coding: Solve 3 Mixed LeetCode problems",
                            "SQL: Solve 3 Mixed Complex Queries",
                            "Behavioral: STAR Method prep",
                            "Mock Interview: End-to-End Machine Learning case",
                            "Identify final weak spots for Day 30"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Hard', content: "Walk me through a Random Forest project." },
                            { type: 'question', difficulty: 'Hard', content: "Explain a complex SQL query you wrote." },
                            { type: 'question', difficulty: 'Easy', content: "Define precision at k." },
                            { type: 'question', difficulty: 'Medium', content: "System Design - Recommendation Engine basics." },
                            { type: 'code', difficulty: 'Hard', content: "Live coding - Valid Parentheses (Stack)." }
                        ]
                    },
                    {
                        day: 30, topic: "Final Prep & Mock Interviews",
                        learn: ["Confidence Building", "Resume Walkthrough", "Negotiation Basics"],
                        python: ["Light Coding Warmup", "Review Cheat Sheets"],
                        practice: "Mock Behavioral Interview",
                        review: "Mindset & Logistics",
                        dailySchedule: [
                            "Review all Cheat Sheets & Summaries",
                            "Practice: Explain complex topics simply (Feynman)",
                            "Resume: Walk through every project detail",
                            "Behavioral: 'Tell me about a time...' (Fail/Success)",
                            "Behavioral: 'Why this company/role?'",
                            "Technical: Rapid fire definitions check",
                            "Coding: 2 Easy/Medium Warmup problems",
                            "Logistics: Check camera, mic, internet",
                            "Questions for Interviewer preparation",
                            "Salary Negotiation basics & ranges",
                            "Visualization: Success Mindset & Calmness",
                            "Final Rest: You are ready!"
                        ],
                        aiCues: [
                            { type: 'question', difficulty: 'Easy', content: "Tell me about yourself." },
                            { type: 'question', difficulty: 'Medium', content: "Why Data Science?" },
                            { type: 'question', difficulty: 'Easy', content: "What is your greatest strength?" },
                            { type: 'question', difficulty: 'Medium', content: "Describe a time you failed." },
                            { type: 'question', difficulty: 'Hard', content: "How do you explain technical concepts to non-technical stakeholders?" }
                        ]
                    }
                ]
            }
        };

        const weeklyPlan = {};
        [1, 2, 3, 4, 5].forEach(week => {
            weeklyPlan[week] = {
                title: originalData[week]?.title || '',
                days: originalData[week]?.days || [],
            };
        });

        // --- STATE ---
        let selectedWeek = 1;
        let selectedDay = 1;
        let activeTab = 'topics';
        let focusMode = false;
        let isLoading = false;
        let modalContent = null; // { title: '', text: '' }
        
        // --- AI COACH STATE ---
        let selectedCue = null; // { index: 0, cue: { type, difficulty, content } }
        let cueAnswer = '';
        let cueFeedback = '';
        
        // --- DS ASSISTANT STATE ---
        let chatHistory = JSON.parse(localStorage.getItem('dsChatHistory')) || [];
        
        // --- NEW STATE for Progress ---
        let activeStudyDay = 1; // This will be calculated on load

        let expandedTimeSlot = null; // index
        let completedConcepts = JSON.parse(localStorage.getItem('dsConceptsCompleted')) || {};

        // Vanta.js effect references
        let vantaEffectHeader = null;
        let vantaEffectFooter = null;
        let vantaEffectWeeks = null;
        let vantaEffectBody = null;


        // --- DOM ELEMENTS ---
        const loadingOverlay = document.getElementById('loading-overlay');
        const modalOverlay = document.getElementById('modal-overlay');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        
        const headerSection = document.getElementById('header-section');
        const focusModeExit = document.getElementById('focus-mode-exit');
        const mainContentWrapper = document.getElementById('main-content-wrapper');
        const weekSelectorContainer = document.getElementById('vanta-weeks');
        
        const weekSelectorEl = document.getElementById('week-selector');
        const daySelectorEl = document.getElementById('day-selector');
        const weekTitleEl = document.getElementById('week-title');
        
        const dayTopicTitleEl = document.getElementById('day-topic-title');
        const dayQuoteEl = document.getElementById('day-quote');
        const dayIconContainerEl = document.getElementById('day-icon-container');
        
        const progressTextEl = document.getElementById('progress-text');
        const progressPercentEl = document.getElementById('progress-percent');
        const progressBarFillEl = document.getElementById('progress-bar-fill');
        
        const tabBtnTopics = document.getElementById('tab-btn-topics');
        const tabBtnSchedule = document.getElementById('tab-btn-schedule');
        const tabBtnCoach = document.getElementById('tab-btn-coach');
        const tabBtnAssistant = document.getElementById('tab-btn-assistant'); // New DOM Element
        const tabContentEl = document.getElementById('tab-content');

        const vantaHeaderRef = document.getElementById('vanta-header');
        const vantaFooterRef = document.getElementById('vanta-footer');
        const vantaMiddleRef = document.getElementById('vanta-middle');
        const vantaWeeksRef = document.getElementById('vanta-weeks');
        const vantaBodyRef = document.getElementById('vanta-body-background');

        const statsDaysStarted = document.getElementById('stats-days-started');
        const statsConceptsMastered = document.getElementById('stats-concepts-mastered');
        const footerStatsDays = document.getElementById('footer-stats-days');
        const footerStatsConcepts = document.getElementById('footer-stats-concepts');

        // --- DATA HELPERS ---

        /**
         * Safely escapes HTML special characters to prevent XSS
         */
        function escapeHTML(str) {
            if (typeof str !== 'string') return '';
            return str.replace(/[&<>"']/g, function(m) {
                return {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                }[m];
            });
        }

        /**
         * Basic markdown to HTML renderer for chat bubbles
         */
        function formatMarkdown(text) {
            if (typeof text !== 'string') return '';
            
            let html = '\n' + text.trim() + '\n'; // Add padding for regex

            // 1. Code Blocks (```...```)
            html = html.replace(/\n```(python|sql|javascript|bash|json|html|css)?\s*([\s\S]*?)```\n/g, (match, lang, code) => {
                const escapedCode = code.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                return `\n<pre><code>${escapedCode.trim()}</code></pre>\n`;
            });

            // 2. Tables
            html = html.replace(/\n((?:\|[^\n\|]+\|\n)+)(\|[\s\:\-]+\|(?:\n|$))((?:\|[^\n\|]+\|\n?)*)/g, (match, headerRows, separatorRow, bodyRows) => {
                let table = '<table class="w-full border-collapse border border-purple-200 my-4">';
                
                table += '<thead>';
                headerRows.split('\n').filter(row => row.trim()).forEach(row => {
                    table += '<tr>';
                    row.split('|').filter(cell => cell.trim()).forEach(cell => {
                        table += `<th class="border border-purple-300 p-2 bg-purple-50 text-left text-purple-900 font-semibold">${cell.trim()}</th>`;
                    });
                    table += '</tr>';
                });
                table += '</thead>';
                
                table += '<tbody>';
                bodyRows.split('\n').filter(row => row.trim()).forEach(row => {
                    table += '<tr>';
                    row.split('|').filter((cell, i) => i > 0 && i < row.split('|').length - 1).forEach(cell => {
                        let cellContent = cell.trim()
                            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                            .replace(/\*(.*?)\*/g, '<em>$1</em>')
                            .replace(/`(.*?)`/g, '<code>$1</code>');
                        table += `<td class="border border-purple-200 p-2">${cellContent}</td>`;
                    });
                    table += '</tr>';
                });
                table += '</tbody>';
                
                return `\n${table}\n`;
            });

            // 3. Headers
            html = html.replace(/\n### (.*$)/gim, '<h3>$1</h3>');
            html = html.replace(/\n## (.*$)/gim, '<h2>$1</h2>');
            html = html.replace(/\n# (.*$)/gim, '<h1>$1</h1>');
            
            // 4. Lists
            html = html.replace(/\n\* (.*$)/gim, '<ul><li>$1</li></ul>');
            html = html.replace(/\n- (.*$)/gim, '<ul><li>$1</li></ul>');
            html = html.replace(/<\/ul>\n<ul>/gim, '');

            html = html.replace(/\n(\d+)\. (.*$)/gim, '<ol><li>$2</li></ol>');
            html = html.replace(/<\/ol>\n<ol>/gim, '');

            // 6. Bold
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            // 7. Italics
            html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');

            // 8. Inline Code
            html = html.replace(/`(.*?)`/g, '<code>$1</code>');
            
            // 9. Paragraphs
            html = html.split('\n').map(line => {
                line = line.trim();
                if (line === '') return '';
                if (line.startsWith('<h') || line.startsWith('<ul') || line.startsWith('<ol') || line.startsWith('<li') || line.startsWith('<pre') || line.startsWith('<table') || line.startsWith('</')) {
                    return line;
                }
                return `<p>${line}</p>`;
            }).join('');

            html = html.replace(/<\/ul><p><\/p><ul>/gim, '');
            html = html.replace(/<\/ol><p><\/p><ol>/gim, '');

            return html;
        }

        /**
         * Gets completion stats for a single day
         */
        function getDayCompletion(dayInfo) {
            if (!dayInfo) return { completed: 0, total: 0, percentage: 0 };
            
            let total = 0;
            const schedule = updateScheduleWithConcepts(dayInfo);
            schedule.forEach(slot => {
                if (slot.type !== 'break') {
                    total += slot.concepts.filter(c => c.text && c.text.trim() !== "").length;
                }
            });
            
            const completed = (completedConcepts[dayInfo.day] || []).length;
            
            let percentage = 0;
            if (total > 0) {
                percentage = (completed / total) * 100;
            } else if (completed > 0) {
                percentage = 100;
            }
            
            return { completed, total, percentage: Math.round(percentage) };
        }

        /**
         * Gets aggregate completion stats for a whole week
         */
        function getWeekCompletion(weekNum) {
            const weekData = weeklyPlan[weekNum];
            if (!weekData) return { completed: 0, total: 0, percentage: 0 };
            
            let weekTotal = 0;
            let weekCompleted = 0;
            
            weekData.days.forEach(dayInfo => {
                const dayStats = getDayCompletion(dayInfo);
                weekTotal += dayStats.total;
                weekCompleted += (completedConcepts[dayInfo.day] || []).length;
            });
            
            const percentage = weekTotal > 0 ? (weekCompleted / weekTotal) * 100 : 0;
            return { completed: weekCompleted, total: weekTotal, percentage: Math.round(percentage) };
        }

        function getDayData() {
            const weekData = weeklyPlan[selectedWeek];
            if (!weekData) return null;
            
            let dayNum;
            if (selectedWeek <= 4) {
                dayNum = (selectedWeek - 1) * 7 + selectedDay;
            } else {
                dayNum = 28 + selectedDay;
            }
            
            return weekData.days.find(d => d.day === dayNum);
        }

        function updateScheduleWithConcepts(dayInfo) {
            if (!dayInfo) return hourlyScheduleTemplate;
            
            if (dayInfo.dailySchedule && dayInfo.dailySchedule.length > 0) {
                const userActivities = dayInfo.dailySchedule;
                const nonBreakSlots = hourlyScheduleTemplate.filter(s => s.type !== 'break');
                const itemsPerSlot = Math.ceil(userActivities.length / nonBreakSlots.length);
                let activityIndex = 0;
                
                return hourlyScheduleTemplate.map(slot => {
                    if (slot.type === 'break') return slot;
                    
                    const slotConcepts = [];
                    for (let i = 0; i < itemsPerSlot && activityIndex < userActivities.length; i++) {
                        slotConcepts.push({ 
                            text: userActivities[activityIndex], 
                            id: `activity-${activityIndex}` 
                        });
                        activityIndex++;
                    }
                    
                    return { 
                        ...slot, 
                        concepts: slotConcepts
                    };
                });
            }
            return hourlyScheduleTemplate;
        }

        // --- STATE MUTATORS ---
        window.selectWeek = (week) => {
            selectedWeek = week;
            selectedDay = 1;
            localStorage.setItem('dsLastVisited', JSON.stringify({ week: selectedWeek, day: selectedDay }));
            resetTabState();
            updateUI();
        };

        window.selectDay = (day) => {
            selectedDay = day;
            localStorage.setItem('dsLastVisited', JSON.stringify({ week: selectedWeek, day: selectedDay }));
            resetTabState();
            updateUI();
        };
        
        window.setActiveTab = (tab) => {
            activeTab = tab;
            updateUI();
        };

        window.setFocusMode = (isFocused) => {
            focusMode = isFocused;
            updateUI();
        };

        window.handleToggleConcept = (conceptId) => {
            const currentDayInfo = getDayData();
            if (!currentDayInfo) return;
            const dayKey = currentDayInfo.day;
            const currentConcepts = completedConcepts[dayKey] || [];
            
            if (currentConcepts.includes(conceptId)) {
                completedConcepts[dayKey] = currentConcepts.filter(id => id !== conceptId);
            } else {
                completedConcepts[dayKey] = [...currentConcepts, conceptId];
            }
            
            localStorage.setItem('dsConceptsCompleted', JSON.stringify(completedConcepts));
            updateUI();
        };
        
        window.toggleTimeSlot = (idx) => {
            expandedTimeSlot = (expandedTimeSlot === idx) ? null : idx;
            renderSchedule();
            lucide.createIcons();
        };

        window.closeModal = () => {
            modalContent = null;
            updateUI();
        };
        
        function showModal(title, text) {
            modalContent = { title, text };
            updateUI();
        }

        function setIsLoading(loading) {
            isLoading = loading;
            updateUI();
        }
        
        function resetTabState() {
            activeTab = 'topics';
            selectedCue = null;
            cueAnswer = '';
            cueFeedback = '';
            expandedTimeSlot = null;
        }

        window.handleExplainConcept = async (concept) => {
            const response = await callGemini(
                `Please explain this data science concept clearly and concisely: "${concept}"`,
                "You are a friendly and expert data science tutor. Explain the concept clearly, using analogies if helpful. Keep it concise."
            );
            if (response) {
                showModal(`Explanation: ${concept}`, response);
            }
        };

        // --- RESET FUNCTIONALITY ---
        window.resetChallenge = () => {
            if (confirm("Are you sure? This will clear all your progress and restart the 30-day challenge from today.")) {
                // 1. Clear Storage
                localStorage.removeItem('dsStartDate');
                localStorage.removeItem('dsConceptsCompleted');
                localStorage.removeItem('dsChatHistory');
                localStorage.removeItem('dsLastVisited');

                // 2. Reset Internal State
                completedConcepts = {};
                chatHistory = [];
                
                // 3. Set New Start Date
                const startDate = new Date().toISOString();
                localStorage.setItem('dsStartDate', startDate);
                
                // 4. Reset Active Day
                activeStudyDay = 1;
                selectedWeek = 1;
                selectedDay = 1;

                // 5. Refresh UI
                resetTabState();
                updateUI();
                alert("Challenge Reset! Good luck on your new start!");
            }
        };

        // --- RENDER FUNCTIONS (Changed to Function Declarations for Hoisting) ---
        
        function updateUI() {
            renderWeekSelector();
            renderDayHeader();
            renderTabContent();
            renderUIElements();
            updateStats();
            lucide.createIcons();
        }
        
        function renderWeekSelector() {
            let weekHtml = '';
            for (let i = 1; i <= 5; i++) { 
                const isSelected = selectedWeek === i;
                const weekStats = getWeekCompletion(i);
                
                let startDay, endDay;
                if (i <= 4) {
                    startDay = (i - 1) * 7 + 1;
                    endDay = i * 7;
                } else {
                    startDay = 29;
                    endDay = 30;
                }

                const isTodayWeek = activeStudyDay >= startDay && activeStudyDay <= endDay;
                const btnClass = isSelected ? 'week-btn-selected' : 'week-btn-default';
                const textClass = isSelected ? 'week-btn-text-selected' : 'week-btn-text-default';
                const activeClass = isTodayWeek && !isSelected ? 'week-btn-active-ring' : '';

                weekHtml += `
                    <button
                        onclick="selectWeek(${i})"
                        class="week-btn ${btnClass} ${activeClass}"
                    >
                        <span class="week-btn-text ${textClass}">W${i}</span>
                        <span class="week-btn-percent ${textClass}">${weekStats.percentage}%</span>
                        <div class="week-progress-track">
                             <div class="week-progress-fill" style="width: ${weekStats.percentage}%"></div>
                        </div>
                    </button>
                `;
            }
            weekSelectorEl.innerHTML = weekHtml;

            const weekData = weeklyPlan[selectedWeek];
            if (!weekData) return;
            
            weekTitleEl.textContent = `Week ${selectedWeek}: ${weekData.title}`;
            
            let dayHtml = '';
            weekData.days.forEach((dayInfo, idx) => {
                const dayIndex = idx + 1;
                const isSelected = selectedDay === dayIndex;
                const dayStats = getDayCompletion(dayInfo);
                const isCompleted = dayStats.percentage === 100;
                const isToday = dayInfo.day === activeStudyDay;
                
                const btnClass = isSelected ? 'day-btn-selected' : 'day-btn-default';
                const activeClass = isToday && !isSelected ? 'day-btn-active-ring' : '';
                const dayLabel = selectedWeek <= 4 ? (dayIndex === 7 ? "Sun" : `D${dayIndex}`) : `D${dayIndex}`;

                dayHtml += `
                    <button
                        onclick="selectDay(${dayIndex})"
                        class="day-btn ${btnClass} ${activeClass}"
                    >
                        <span>${dayLabel}</span>
                        ${isCompleted ? '<i data-lucide="check" class="day-btn-check"></i>' : ''}
                    </button>
                `;
            });
            daySelectorEl.innerHTML = dayHtml;
        }

        function renderDayHeader() {
            const dayInfo = getDayData();
            if (!dayInfo) {
                dayTopicTitleEl.textContent = "Select a day";
                dayQuoteEl.textContent = "";
                dayIconContainerEl.innerHTML = "";
                progressTextEl.textContent = "Progress: 0 / 0 Concepts Mastered";
                progressPercentEl.textContent = `0%`;
                progressBarFillEl.style.width = `0%`;
                return;
            }

            const isReviewDay = dayInfo.day % 7 === 0 || dayInfo.day === 29 || dayInfo.day === 30;
            const todaysQuote = motivationalQuotes[(dayInfo.day - 1) % motivationalQuotes.length] || "";
            
            dayTopicTitleEl.textContent = `Day ${dayInfo.day}: ${dayInfo.topic}`;
            dayQuoteEl.textContent = `"${todaysQuote}"`;
            
            dayIconContainerEl.innerHTML = isReviewDay 
                ? `<i data-lucide="sparkles" class="text-purple-400 flex-shrink-0 animate-bounce" style="width: 40px; height: 40px; color: var(--color-purple-400); animation: float 2s ease-in-out infinite;"></i>` 
                : '';
                
            const dayStats = getDayCompletion(dayInfo);
            progressTextEl.textContent = `Progress: ${dayStats.completed} / ${dayStats.total} Concepts Mastered`;
            progressPercentEl.textContent = `${dayStats.percentage}%`;
            progressBarFillEl.style.width = `${dayStats.percentage}%`;
        }

        function renderTabContent() {
            [tabBtnTopics, tabBtnSchedule, tabBtnCoach, tabBtnAssistant].forEach(btn => {
                btn.className = 'tab-button tab-button-default';
            });
            
            if (activeTab === 'topics') {
                tabBtnTopics.className = 'tab-button tab-button-active-topics';
                renderTopics();
            } else if (activeTab === 'schedule') {
                tabBtnSchedule.className = 'tab-button tab-button-active-topics';
                renderSchedule();
            } else if (activeTab === 'coach') {
                tabBtnCoach.className = 'tab-button tab-button-active-topics';
                renderAICoach();
            } else if (activeTab === 'assistant') { 
                tabBtnAssistant.className = 'tab-button tab-button-active-assistant';
                renderDSAssistant();
            }
        }

        function renderTopics() {
            const dayInfo = getDayData();
            if (!dayInfo) {
                tabContentEl.innerHTML = '';
                return;
            }

            tabContentEl.innerHTML = `
                <div class="topics-grid animate-fade-in">
                    <div class="topic-card" style="border-color: rgba(59, 130, 246, 0.3);">
                        <div class="topic-card-header">
                            <i data-lucide="book-open" style="width: 24px; height: 24px; color: #2563eb;"></i>
                            <h3 class="topic-card-title" style="color: #1e3a8a;">Learning Objectives</h3>
                        </div>
                        <ul class="topic-card-list">
                            ${dayInfo.learn.map(item => `
                                <li class="topic-card-list-item">
                                    <i data-lucide="check-circle" class="topic-card-list-item-icon" style="width: 16px; height: 16px;"></i>
                                    <span>${item}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="topic-card" style="border-color: rgba(168, 85, 247, 0.3);">
                        <div class="topic-card-header">
                            <i data-lucide="code" style="width: 24px; height: 24px; color: var(--color-purple-600);"></i>
                            <h3 class="topic-card-title" style="color: var(--color-purple-800);">Practice Problems</h3>
                        </div>
                        <ul class="topic-card-list">
                            ${dayInfo.python.map((item, idx) => `
                                <li class="topic-card-list-item-numbered">
                                    <span class="topic-card-list-item-number">${idx + 1}.</span>
                                    <span>${item}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="topic-card" style="border-color: rgba(249, 115, 22, 0.3);">
                        <div class="topic-card-header">
                            <i data-lucide="target" style="width: 24px; height: 24px; color: #c2410c;"></i>
                            <h3 class="topic-card-title" style="color: #7c2d12;">Practice & Application</h3>
                        </div>
                        <p class="topic-card-text">${dayInfo.practice}</p>
                    </div>

                    <div class="topic-card" style="border-color: rgba(236, 72, 153, 0.3);">
                        <div class="topic-card-header">
                            <i data-lucide="activity" style="width: 24px; height: 24px; color: var(--color-pink-600);"></i>
                            <h3 class="topic-card-title" style="color: var(--color-pink-800);">Review & Consolidate</h3>
                        </div>
                        <p class="topic-card-text">${dayInfo.review}</p>
                    </div>
                </div>
            `;
        }
        
        function renderSchedule() {
            const dayInfo = getDayData();
            const schedule = updateScheduleWithConcepts(dayInfo);
            
            tabContentEl.innerHTML = `
                <div class="animate-fade-in">
                    <h3 class="schedule-title">
                        <i data-lucide="clock" style="width: 28px; height: 28px; color: var(--color-pink-700);"></i>
                        Today's Schedule (8:00 AM - 5:00 PM)
                    </h3>
                    <div class="schedule-slot-container">
                        ${schedule.map((slot, idx) => {
                            const isBreak = slot.type === 'break';
                            const slotClass = isBreak ? 'schedule-slot-break' : 'schedule-slot-learn';
                            const isExpanded = expandedTimeSlot === idx;
                            
                            const conceptsHtml = (isExpanded && !isBreak && slot.concepts && slot.concepts.length > 0) ? `
                                <div class="schedule-slot-concepts-container">
                                    <div class="schedule-slot-concepts-content">
                                        <p class="schedule-slot-concepts-title">Task:</p>
                                        <div class="schedule-slot-concepts-list">
                                            ${slot.concepts.filter(c => c.text).map((concept, cIdx) => {
                                                const conceptId = concept.id;
                                                const isChecked = (completedConcepts[dayInfo?.day] || []).includes(conceptId);
                                                const escapedConcept = concept.text.replace(/'/g, "\\'").replace(/"/g, "&quot;");
                                                const textClass = isChecked ? 'concept-item-text-checked' : '';
                                                
                                                return `
                                                    <div class="concept-item">
                                                        <label class="concept-item-label">
                                                            <input
                                                                type="checkbox"
                                                                ${isChecked ? 'checked' : ''}
                                                                onchange="handleToggleConcept('${conceptId}')"
                                                            />
                                                            <span class="concept-item-text ${textClass}">
                                                                ${concept.text}
                                                            </span>
                                                            ${isChecked ? `<i data-lucide="check-circle" class="concept-item-checked-icon" style="width: 18px; height: 18px;"></i>` : ''}
                                                        </label>
                                                        <button 
                                                            class="concept-item-explain-btn"
                                                            onclick="handleExplainConcept('${escapedConcept}')"
                                                            title="Explain this concept">
                                                            <i data-lucide="brain-circuit" style="width: 18px; height: 18px;"></i>
                                                        </button>
                                                    </div>
                                                `;
                                            }).join('')}
                                        </div>
                                    </div>
                                </div>
                            ` : '';

                            return `
                                <div class="schedule-slot ${slotClass}">
                                    <button onclick="toggleTimeSlot(${idx})" class="schedule-slot-btn">
                                        <div class="schedule-slot-btn-left">
                                            <div class="schedule-slot-icon-bg ${isBreak ? 'schedule-slot-icon-bg-break' : 'schedule-slot-icon-bg-learn'}">
                                                <i data-lucide="${slot.icon}" class="${isBreak ? 'schedule-slot-icon-break' : 'schedule-slot-icon-learn'}" style="width: 24px; height: 24px;"></i>
                                            </div>
                                            <div>
                                                <p class="schedule-slot-time ${isBreak ? 'schedule-slot-time-break' : 'schedule-slot-time-learn'}">
                                                    ${slot.time}
                                                </p>
                                                <p class="schedule-slot-activity ${isBreak ? 'schedule-slot-activity-break' : 'schedule-slot-activity-learn'}">
                                                    ${(slot.concepts && slot.concepts.length > 0 && !isBreak) ? "Click to view " + slot.concepts.length + " tasks" : slot.activity}
                                                </p>
                                            </div>
                                        </div>
                                        <span class="schedule-slot-duration ${isBreak ? 'schedule-slot-duration-break' : 'schedule-slot-duration-learn'}">
                                            ${slot.duration} min
                                        </span>
                                    </button>
                                    ${conceptsHtml}
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function renderAICoach() {
            const dayInfo = getDayData();
            if (!dayInfo || !dayInfo.aiCues) {
                tabContentEl.innerHTML = `<p>No AI Coach content for this day.</p>`;
                return;
            }

            let contentHtml = '';

            if (!selectedCue) {
                contentHtml = `
                    <h3 class="coach-intro-title">Today's Challenges</h3>
                    <p class="coach-intro-subtitle">Select a challenge to test your knowledge. The AI coach will provide feedback on your answer.</p>
                    <div class="coach-challenge-list">
                        ${dayInfo.aiCues.map((cue, idx) => {
                            const isCode = cue.type === 'code';
                            const icon = isCode ? 'code' : 'help-circle';
                            const difficultyClass = `difficulty-${cue.difficulty.toLowerCase()}`;

                            return `
                                <button onclick="selectCue(${idx})" class="coach-challenge-btn">
                                    <div class="coach-challenge-btn-left">
                                        <i data-lucide="${icon}" class="coach-challenge-btn-icon" style="width: 24px; height: 24px;"></i>
                                        <div>
                                            <p class="coach-challenge-btn-title">${isCode ? 'Code Challenge' : 'Concept Question'}</p>
                                            <p class="coach-challenge-btn-text">${cue.content}</p>
                                        </div>
                                    </div>
                                    <span class="coach-challenge-difficulty ${difficultyClass}">${cue.difficulty}</span>
                                </button>
                            `;
                        }).join('')}
                    </div>
                `;
            } else {
                const cue = selectedCue.cue;
                const isCode = cue.type === 'code';
                
                contentHtml = `
                    <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                        <button onclick="clearSelectedCue()" class="coach-back-btn">
                            <i data-lucide="arrow-left" style="width: 16px; height: 16px;"></i>
                            Back to All Challenges
                        </button>
                    
                        <div class="coach-challenge-box">
                            <p class="coach-challenge-box-title">${isCode ? 'Code Challenge' : 'Interview Question'} (${cue.difficulty}):</p>
                            ${isCode 
                                ? `<pre class="coach-code-block"><code>${escapeHTML(cue.content)}</code></pre>`
                                : `<p class="coach-challenge-box-text">${escapeHTML(cue.content)}</p>`
                            }
                        </div>

                        <div>
                            <label for="cueAnswer" class="coach-answer-label">Your ${isCode ? 'Solution' : 'Answer'}:</label>
                            <textarea
                                id="cueAnswer"
                                rows="${isCode ? 12 : 8}"
                                class="coach-answer-textarea ${isCode ? 'font-mono' : ''}"
                                placeholder="Type your detailed ${isCode ? 'code or explanation' : 'answer'} here..."
                                oninput="handleCueAnswerInput(this.value)"
                            >${cueAnswer}</textarea>
                        </div>
                        
                        <button
                            id="feedback-button"
                            onclick="handleGetFeedback()"
                            ${!cueAnswer || isLoading ? 'disabled' : ''}
                            class="coach-submit-btn"
                        >
                            <i data-lucide="send" style="width: 24px; height: 24px;"></i>
                            Get AI Coach Feedback
                        </button>

                        ${cueFeedback ? `
                            <div class="coach-feedback-box">
                                <p class="coach-feedback-title">Coach's Detailed Feedback:</p>
                                <div class="coach-feedback-content">${formatMarkdown(cueFeedback)}</div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            tabContentEl.innerHTML = `
                <div class="coach-container">
                    <div class="coach-header">
                        <h2 class="coach-title">
                            <i data-lucide="bot" style="width: 32px; height: 32px; color: var(--color-pink-600); animation: float 2s ease-in-out infinite;"></i>
                            AI Coach
                        </h2>
                        <span class="coach-topic">${dayInfo.topic}</span>
                    </div>
                    ${contentHtml}
                </div>
            `;
        }

        function renderDSAssistant() {
            tabContentEl.innerHTML = `
                <div class="coach-container">
                    <div class="coach-header">
                        <h2 class="coach-title">
                            <i data-lucide="message-circle" style="width: 32px; height: 32px; color: var(--color-blue-500);"></i>
                            DS Assistant
                        </h2>
                        <button onclick="clearChatHistory()" class="assistant-clear-btn">
                            <i data-lucide="trash-2" style="width: 16px; height: 16px;"></i>
                            Clear Chat
                        </button>
                    </div>
                    <p class="assistant-subtitle">Ask any data science questions you have. Your conversation will be saved.</p>
                    
                    <div id="chat-history-container" class="chat-container">
                        ${chatHistory.map(msg => `
                            <div class="chat-bubble ${msg.role === 'user' ? 'chat-bubble-user' : 'chat-bubble-model'}">
                                ${msg.role === 'user' ? escapeHTML(msg.text) : formatMarkdown(msg.text)}
                            </div>
                        `).join('')}
                        ${chatHistory.length === 0 ? '<p class="chat-empty">No messages yet. Ask something below!</p>' : ''}
                    </div>
                    
                    <div class="assistant-input-area">
                        <textarea
                            id="ds-assistant-input"
                            rows="4"
                            class="assistant-textarea"
                            placeholder="Ask about a concept, debug code, or ask for a new example..."
                        ></textarea>
                        <button onclick="handleAskAssistant()" class="assistant-submit-btn">
                            <i data-lucide="send" style="width: 24px; height: 24px;"></i>
                            Ask Assistant
                        </button>
                    </div>
                </div>
            `;
            
            const chatContainer = document.getElementById('chat-history-container');
            if(chatContainer) {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
        }

        function renderUIElements() {
            loadingOverlay.classList.toggle('hidden', !isLoading);
            
            if (modalContent) {
                modalTitle.textContent = modalContent.title;
                modalText.textContent = modalContent.text;
                modalOverlay.classList.remove('hidden');
            } else {
                modalOverlay.classList.add('hidden');
            }
            
            headerSection.classList.toggle('hidden', focusMode);
            focusModeExit.classList.toggle('hidden', !focusMode);
            weekSelectorContainer.classList.toggle('hidden', focusMode);
            
            if (focusMode) {
                mainContentWrapper.classList.add('main-container-focus-mode');
            } else {
                mainContentWrapper.classList.remove('main-container-focus-mode');
            }
        }

        function updateStats() {
            const daysStarted = Object.keys(completedConcepts).length;
            const conceptsMastered = Object.values(completedConcepts).reduce((sum, concepts) => sum + concepts.length, 0);
            
            statsDaysStarted.textContent = daysStarted;
            statsConceptsMastered.textContent = conceptsMastered;
            footerStatsDays.textContent = daysStarted;
            footerStatsConcepts.textContent = conceptsMastered;
        }
        
        // --- API CALLS ---
        
        async function callGemini(userPrompt, systemPrompt, maxRetries = 3) {
            setIsLoading(true);
            
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
            };

            if (systemPrompt) {
                payload.systemInstruction = { parts: [{ text: systemPrompt }] };
            }

            for (let attempt = 0; attempt < maxRetries; attempt++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
                    const result = await response.json();
                    
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        setIsLoading(false);
                        return result.candidates[0].content.parts[0].text;
                    }
                    throw new Error("Invalid response structure");
                } catch (error) {
                    console.error(`API attempt ${attempt + 1} failed:`, error);
                    if (attempt === maxRetries - 1) {
                        setIsLoading(false);
                        showModal("API Error", `Failed: ${error.message}`);
                        return null;
                    }
                    await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, attempt)));
                }
            }
        }

        window.selectCue = (index) => {
            const dayInfo = getDayData();
            if (!dayInfo || !dayInfo.aiCues[index]) return;
            
            selectedCue = {
                index: index,
                cue: dayInfo.aiCues[index]
            };
            cueAnswer = '';
            cueFeedback = '';
            updateUI();
        };

        window.clearSelectedCue = () => {
            selectedCue = null;
            cueAnswer = '';
            cueFeedback = '';
            updateUI();
        };

        window.handleGetFeedback = async () => {
            const answer = document.getElementById('cueAnswer')?.value;
            if (!answer || !selectedCue) {
                showModal("Hold on!", "Please provide an answer first.");
                return;
            }
            cueAnswer = answer;
            
            const cue = selectedCue.cue;
            const isCode = cue.type === 'code';
            
            const prompt = `
                **The Challenge:**
                ${cue.content}

                **My ${isCode ? 'Solution' : 'Answer'}:**
                ${cueAnswer}

                **Please provide feedback:**
            `;
            
            const systemPrompt = isCode
                ? "You are an expert data science code reviewer. Be constructive. Analyze the code for accuracy, efficiency, and best practices. Use bullet points for your feedback. If the code is correct, explain *why* it's a good solution."
                : "You are an expert data science interviewer. Be constructive. Analyze the answer for accuracy, clarity, and structure. Use bullet points for your feedback.";
            
            const response = await callGemini(prompt, systemPrompt);
            if (response) {
                cueFeedback = response;
                updateUI();
            }
        };

        window.handleCueAnswerInput = (value) => {
            cueAnswer = value;
            const feedbackButton = document.getElementById('feedback-button');
            if (feedbackButton) {
                feedbackButton.disabled = !cueAnswer || isLoading;
            }
        };

        window.handleAskAssistant = async () => {
            const inputEl = document.getElementById('ds-assistant-input');
            if (!inputEl) return;
            const query = inputEl.value;
            if (!query.trim()) {
                showModal("Hold on!", "Please type a question first.");
                return;
            }
            
            chatHistory.push({ role: 'user', text: query });
            localStorage.setItem('dsChatHistory', JSON.stringify(chatHistory));
            inputEl.value = '';
            updateUI();
            
            const systemPrompt = "You are a helpful and friendly Data Science assistant. Answer the user's questions clearly and concisely. Format code snippets using markdown (e.g., ```python ... ```). You must also format bold text, lists, and tables using markdown.";
            const response = await callGemini(query, systemPrompt);
            
            if (response) {
                chatHistory.push({ role: 'model', text: response });
                localStorage.setItem('dsChatHistory', JSON.stringify(chatHistory));
                updateUI();
            }
        };

        window.clearChatHistory = () => {
            chatHistory = [];
            localStorage.setItem('dsChatHistory', JSON.stringify(chatHistory));
            updateUI();
        };
        
        // --- VANTA.JS & INITIALIZATION ---
        
        const loadScript = (src) => {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.async = true;
                script.onload = resolve;
                script.onerror = (e) => reject(new Error(`Failed to load script: ${src}`));
                document.head.appendChild(script);
            });
        };

        const loadVantaEffects = async () => {
            try {
                await loadScript('https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.clouds.min.js');
                if (window.VANTA && vantaHeaderRef) {
                    vantaEffectHeader = window.VANTA.CLOUDS({
                        el: vantaHeaderRef,
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200,
                        minWidth: 200,
                        scale: 1.0,
                        speed: 1.10,
                        skyColor: 0xe6c7e6,
                        cloudColor: 0xdab7f2,
                        cloudShadowColor: 0x520aaa,
                        sunColor: 0x62447a,
                        sunGlareColor: 0x2f2e2f
                    });
                }

                await loadScript('https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.fog.min.js');
                if (window.VANTA && vantaFooterRef) {
                    vantaEffectFooter = window.VANTA.FOG({
                        el: vantaFooterRef,
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        highlightColor: 0xc459ed,
                        midtoneColor: 0x924cac,
                        lowlightColor: 0x846ccf,
                        baseColor: 0xdac0e3,
                        blurFactor: 0.61,
                        speed: 2.00,
                        zoom: 1.20
                    });
                }
                
                if (window.VANTA && vantaBodyRef) {
                    vantaEffectBody = window.VANTA.FOG({
                        el: vantaBodyRef,
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        highlightColor: 0xe8e8e8,
                        midtoneColor: 0xf0b8e9,
                        lowlightColor: 0xdab0f2,
                        blurFactor: 0.82,
                        zoom: 1.30
                    });
                }
                
                await loadScript('https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.birds.min.js');
                if (window.VANTA && vantaWeeksRef) {
                        vantaEffectWeeks = window.VANTA.BIRDS({
                        el: vantaWeeksRef,
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        scale: 1.00,
                        scaleMobile: 1.00,
                        backgroundColor: 0xfad3f7,
                        color1: 0xad3cf2,
                        color2: 0x8125e8,
                        birdSize: 2.30,
                        wingSpan: 20.00,
                        speedLimit: 4.00,
                        separation: 75.00,
                        alignment: 48.00,
                        cohesion: 80.00,
                        quantity: 4.00
                    });
                }

            } catch (error) {
                console.error("Failed to load Vanta scripts:", error);
            }
        };

        const createBlossoms = () => {
            const container = document.getElementById('blossom-container');
            const template = document.getElementById('blossom-template');
            if (!container || !template) return;
            
            for (let i = 0; i < 15; i++) {
                const blossom = template.content.cloneNode(true).firstElementChild;
                blossom.style.position = 'absolute';
                blossom.style.opacity = '0.4';
                blossom.style.animation = 'blossom-fall linear forwards';
                blossom.style.left = `${Math.random() * 100}%`;
                blossom.style.animationDelay = `${i * 0.3}s`;
                blossom.style.animationDuration = `${8 + i * 0.5}s`;
                container.appendChild(blossom);
            }
        };

        /**
         * Page Load Initializer
         */
        window.onload = () => {
            let startDate = localStorage.getItem('dsStartDate');
            if (!startDate) {
                startDate = new Date().toISOString();
                localStorage.setItem('dsStartDate', startDate);
            }
            const daysElapsed = Math.floor((new Date() - new Date(startDate)) / (1000 * 60 * 60 * 24));
            activeStudyDay = Math.max(1, Math.min(30, daysElapsed + 1)); 

            const lastVisited = JSON.parse(localStorage.getItem('dsLastVisited')) || { week: 1, day: 1 };
            
            // Logic for Week 5 (2 days) vs Weeks 1-4 (7 days)
            if (lastVisited.week) {
                 selectedWeek = lastVisited.week;
                 selectedDay = lastVisited.day;
            } else {
                if (activeStudyDay <= 28) {
                    selectedWeek = Math.floor((activeStudyDay - 1) / 7) + 1;
                    selectedDay = (activeStudyDay - 1) % 7 + 1;
                } else {
                    selectedWeek = 5;
                    selectedDay = activeStudyDay - 28;
                }
            }

            updateUI();
            loadVantaEffects();
            createBlossoms();
        };

    </script>
</body>
</html>
